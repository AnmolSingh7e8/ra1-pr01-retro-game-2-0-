<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable type="KIND_SpriteKind" id="{2Vq]Q+G=cUG/OOd`b7W">Player</variable><variable type="KIND_SpriteKind" id="CkKQ6{TyvuCAJe!5kn}P">Projectile</variable><variable type="KIND_SpriteKind" id="@__(9V}E3X=}PR.Yt+TH">Food</variable><variable type="KIND_SpriteKind" id="#99ET/:]GP8SVc5$647e">Enemy</variable><variable type="KIND_SpriteKind" id=";Wq7-ncS5(WnwmoLG[jn">StatusBar</variable><variable type="KIND_StatusBarKind" id="(W2!qAT$CGd(/G63GFzK">Health</variable><variable type="KIND_StatusBarKind" id="I7~WEHYyvq@P4:#f2|$w">Energy</variable><variable type="KIND_StatusBarKind" id="pz#]ga%OW(3)QelIc]Kl">Magic</variable><variable type="KIND_StatusBarKind" id="H%!y.u5*kI:N7+%FEha2">EnemyHealth</variable><variable id="kpiY68N`Vr4,0iou(.~s">proyectil2</variable><variable id="}6T/udTZ00Wz+y6+dW@q">barra_enemigo</variable><variable id="/3A`h[;OF_TK2Q@@s~68">enemigo2</variable><variable id="d[hYvbV%QFtNzV`?vt=h">tiene_escudo</variable><variable id="qYrZI+M7VuLXbsS=8sA6">juego_iniciado</variable><variable id="l@]Mp2ZUIL2ygr+(@cxr">personaje</variable><variable id="c*5Dd5r8K9MOwHACz|+Y">bala_mala</variable><variable id="BaD{s(#jX-WSqR1R$eI)">daño_recibido</variable><variable id="=A`q5,LhXWY#P^APrKs%">ubicacion</variable><variable id="JfoK+L#{=4a,M_Uu(pJX">col</variable><variable id="SZwP~P.Z+ADp2l)Kr5?T">fila</variable><variable id="LUIL5(.}jZ~vnqtCCSff">techo</variable><variable id="i^?Y7SVg)|9W/[{iJ[C{">suelo</variable><variable id="B/^tz[aLM[QZi=_Yg]Y:">izq</variable><variable id="H`QSW2-2L~{kr8Sp]=P7">der</variable><variable id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</variable><variable id="/X`X=t5iw$!w1+9A{b=3">cofre_abierto</variable><variable id="/E%xDuwW^;j?nPZ_MpCP">municion_actual</variable><variable id="tszq4J=h:G]dtjl-weWY">npc1</variable><variable id="QPBlh+s%EU{/LLgTLow}">npc2</variable><variable id="8~/^(r0(MjVJ(2ZyIUz$">npc3</variable><variable id="cb;Z%6EK8-%45Ae4Bmj9">npc4</variable><variable id="KMEQPDn*+!,81VpSiems">npc5</variable><variable id="}8$.ANdRz0muu1oXxns]">proyectil</variable><variable id="_N5OrimrUP_C0VqEmPK.">cursor</variable><variable id="?9mW]As6*}F$fMy)VcD^">boton_jugar</variable><variable id="`-No8:Jf@eOdQerL=[Rs">en_bus</variable><variable id="%@3}GB}8VVEqA]P=*]wO">autobus2</variable><variable id="n6c7Sc$xV*xGfp@Eaa@M">fire_rate_boost</variable><variable id="ZbXT_=_Bo64dCuC0lp1$">tipo</variable><variable id="iTxS~M$yV-#lz3`KS(6j">enemigo_muerto</variable><variable id="#?!=ZDqWN+rjXMW=/b=u">kills</variable><variable id="2tUr)E4;,{6Bj?lTN(aS">npcs_vivos</variable><variable id="h7%p4L[_$!|A5!nIEuP=">i</variable><variable id="2=U!60.6U1_RL}V%fvq}">enemigo</variable><variable id="x|=6}CB=qJ|VPQldiI,e">img_enemigo1</variable><variable id="UNW`;X+}CNOtq0PSb0a9">barra</variable><variable id="dO28`1lLFaMHT.YrcV0#">lista_npcs</variable><variable id="m0:rnd7j?YNN!TZ9-,{+">img_enemigo2</variable><variable id="*6Z$^]}6lKEWB2LlPzIX">img_enemigo3</variable><variable id="J!KsS/_`*[b/1^72kh!E">vida_jugador</variable><variable id="hZnj6(@F}UqaO,6*rj9,">imagen_hitbox</variable><variable id="MAUz+o1{n3)eVkW[Je$o">x_inicio</variable><variable id="9zR~G{m0*#)HPIl{gncd">velocidad_x</variable><variable id="Xny5BR.BjNl0+9{N1f{8">y_inicio</variable><variable id="yW^Lr-{b(ET09ek7K;k*">MAP_SIZE2</variable><variable id="9d9]U#M2tvK?O@hCDc3^">moviendo</variable><variable id=":]ighEVBEcTbI?xkExL@">enemigo_actual</variable><variable id="D%=wsNXoyHLtiSVM4*m?">velocidad_bala</variable><variable id="#63~Vn-Pih^GeEVn1?|z">vida_bala</variable><variable id="#ShN(v+.!;_$I1hiyIwA">img_bala</variable><variable id="{8oRZGCylJ.}KN78`NpV">bala</variable><variable id="iP:0r1]=A@AA_bcRTi;;">dx</variable><variable id="8IFaJ)Zo{3MC7Xpbsr)@">dy</variable><variable id="9eOWsX6{xf,~P^!u_l,d">angulo</variable><variable id="V)veLLmVj~;$Np~iR,xf">vx</variable><variable id="dEnWrsq4fCxg,6/2bZ{U">vy</variable><variable id="yMM~Zwpvw=wmM8fV;NKZ">MAP_SIZE</variable><variable id="{}r)qqJ{#4gAsJ_EjqSw">npc_healer</variable><variable id="`dW;MMHIbP2GSi:T|lXt">npc_runner</variable><variable id="+vt|bb$(es~%)4J*N6db">npc_ammo</variable><variable id="K+V|Q~!BSPDH}syn[GR~">npc_shield</variable><variable id="D;eVylt8y)p!!@0${FUL">npc_fire</variable></variables><comment id="jS(F]@#6B#}6`xCXMK47" x="6965" y="4170" w="440" h="120">
--- INICIALIZACIÓN DE VARIABLES GLOBALES ---
</comment><comment id="pY=QF_ST{4m{ZM~e$Jb#" x="0" y="0" w="430" h="120">
Definición de estados iniciales, banderas y
</comment><comment id="IcJ2FIC%.e7L2wFVL:Vc" x="545" y="6335" w="460" h="120">
variables de control para la lógica del juego.
</comment><block type="pxt-on-start" id="$bgqdZtQn4?#7NI{`nfm" x="20" y="20"><statement name="HANDLER"><block type="variables_set" id="N=JA6AdmD~U.mY#jTE:H"><field name="VAR" id="yMM~Zwpvw=wmM8fV;NKZ">MAP_SIZE</field><value name="VALUE"><shadow type="math_number" id="tSVYfG~e5J%JCy)qV@}d"><field name="NUM">0</field></shadow></value><next><block type="typescript_statement" id="+a/X-KpK_F`%v_,.XB%O"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="namespace SpriteKind {" line1="    //  Definición de identificadores para gestionar colisiones entre diferentes tipos de entidades" line2="    export const BalaEnemiga = SpriteKind.create()" line3="    export const Autobus = SpriteKind.create()" line4="    export const Cursor = SpriteKind.create()" line5="    export const Boton = SpriteKind.create()" line6="    export const NPC1 = SpriteKind.create()" line7="    export const NPC2 = SpriteKind.create()" line8="    export const NPC3 = SpriteKind.create()" line9="    export const NPC4 = SpriteKind.create()" line10="    export const NPC5 = SpriteKind.create()" line11="}" numlines="12"></mutation><next><block type="typescript_statement" id="377jR_Jmw+S2}Z:p8(+0"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="sprites.onOverlap(SpriteKind.Player, SpriteKind.NPC1, activar_npc)" numlines="1"></mutation><next><block type="typescript_statement" id="}j.s~CxU3Xn_zfKk5oHU"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="sprites.onOverlap(SpriteKind.Player, SpriteKind.NPC2, activar_npc)" numlines="1"></mutation><next><block type="typescript_statement" id="~`6+24h.rQHIMbGG/yof"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="sprites.onOverlap(SpriteKind.Player, SpriteKind.NPC3, activar_npc)" numlines="1"></mutation><next><block type="typescript_statement" id="4TkNm(M`V2TIj}e|[`{n"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="sprites.onOverlap(SpriteKind.Player, SpriteKind.NPC4, activar_npc)" numlines="1"></mutation><next><block type="typescript_statement" id="ZjTEm2IwTtS?|@-Cn]kh"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="sprites.onOverlap(SpriteKind.Player, SpriteKind.NPC5, activar_npc)" numlines="1"></mutation><next><block type="variables_set" id="MnPg/c;7}Wpt4LdA.Y12"><field name="VAR" id="`-No8:Jf@eOdQerL=[Rs">en_bus</field><value name="VALUE"><shadow type="math_number" id="9PlYXiTUs]xFn)tk{]YM"><field name="NUM">0</field></shadow><block type="logic_boolean" id="[=vGo7fm}mQOPx=Q`?d:"><field name="BOOL">TRUE</field></block></value><next><block type="variables_set" id="+NL{;,DGfeq.Y2m_XAUJ"><field name="VAR" id="x|=6}CB=qJ|VPQldiI,e">img_enemigo1</field><value name="VALUE"><shadow type="math_number" id="pg/eCi,.-HsHSV+1+GK1"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="P2|-,sH8nvGm4#W4%}vX"><field name="img">assets.image`enemigo1`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image17"}}</data></block></value><next><block type="variables_set" id="Ld5C~`bfa^:|7eWS,~Pc"><field name="VAR" id="m0:rnd7j?YNN!TZ9-,{+">img_enemigo2</field><value name="VALUE"><shadow type="math_number" id="lA_8QO)zels)db[Te*bZ"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="x(ee]o:_cNx{~:#.Jkzd"><field name="img">assets.image`enemigo2`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image6"}}</data></block></value><next><block type="variables_set" id="Xyg*:31JS+a-fpJ]~Ot5"><field name="VAR" id="*6Z$^]}6lKEWB2LlPzIX">img_enemigo3</field><value name="VALUE"><shadow type="math_number" id="IGGAKZ^87GDW2{J]oI~;"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="B*Z;kG./q3jKQ84HdK=B"><field name="img">assets.image`enemigo3`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image18"}}</data></block></value><next><block type="variables_set" id="?t#NZIJo?~6HN:@x=kxi"><field name="VAR" id="{}r)qqJ{#4gAsJ_EjqSw">npc_healer</field><value name="VALUE"><shadow type="math_number" id="VU*p!|`~(R3yYc!~rH8a"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="B,mJ#Z%x)R9ESc74*Y%X"><field name="img">assets.image`npc_healer`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image21"}}</data></block></value><next><block type="variables_set" id="=B/67!ce9^OM1a|Z#O?{"><field name="VAR" id="`dW;MMHIbP2GSi:T|lXt">npc_runner</field><value name="VALUE"><shadow type="math_number" id="B1O8Aee{zAa+d%sZ7{L:"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="`*qlPLMJ`R~O6Cm6t4$/"><field name="img">assets.image`npc_runner`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image20"}}</data></block></value><next><block type="variables_set" id="[m@z+==Jry7S+Iww/G]{"><field name="VAR" id="+vt|bb$(es~%)4J*N6db">npc_ammo</field><value name="VALUE"><shadow type="math_number" id="yk29*Fk?zsO2{=|bwAi="><field name="NUM">0</field></shadow><block type="screen_image_picker" id="!a-WCr:}qkmU~Bveg8UH"><field name="img">assets.image`npc_ammo`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image16"}}</data></block></value><next><block type="variables_set" id="!Ge)HEZxoCsk!-)axidg"><field name="VAR" id="K+V|Q~!BSPDH}syn[GR~">npc_shield</field><value name="VALUE"><shadow type="math_number" id="A2g8nT/K3WS6oj/_x;`o"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="Qn=QZ$#t4Tsn:q98W[_+"><field name="img">assets.image`npc_shield`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image22"}}</data></block></value><next><block type="variables_set" id="Cd~8)u,oR+*LcqFI++I@"><field name="VAR" id="D;eVylt8y)p!!@0${FUL">npc_fire</field><value name="VALUE"><shadow type="math_number" id=",H=z=CYm*lA5;cn2y$FM"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="~!zvb%q_TXcLz@$+`uF("><field name="img">assets.image`npc_fire`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image19"}}</data></block></value><next><block type="variables_set" id="y)tGPxy,,(|^;Dsklz)d"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field><value name="VALUE"><shadow type="math_number" id="yl5@8u7n.iR!#5]KnKO/"><field name="NUM">0</field></shadow><block type="text" id="IoV4/P1drrU.DKJ7bZ@1"><field name="TEXT">derecha</field></block></value><next><block type="function_call" id="kzp%)/)[j@r76}w3zzf5"><mutation name="mostrar_menu" functionid="JF;EK9o,o^Z[QpL|mjVg"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="gameinterval" id="p|8FNLSk!j5S@@V.f))N" x="1048" y="20"><value name="period"><shadow type="timePicker" id="8nF9BpnAvx%[dHroF/qy"><field name="ms">1000</field></shadow></value><statement name="HANDLER"><block type="typescript_statement" id="KZaLd7jn~q0JJ5wdvTUr"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let img_bala: Image;" numlines="1" declaredvars="img_bala"></mutation><next><block type="typescript_statement" id="(uA*H{#uF=$@36dVJtW,"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let velocidad_bala: number;" numlines="1" declaredvars="velocidad_bala"></mutation><next><block type="typescript_statement" id="5`u{L(Lh`3e{82U=8g:0"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let vida_bala: number;" numlines="1" declaredvars="vida_bala"></mutation><next><block type="typescript_statement" id="mE9{MGT;(fS!kzv~ZLg}"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let bala: Sprite;" numlines="1" declaredvars="bala"></mutation><next><block type="typescript_statement" id="b!2Q~,GhH6H(tzW@]7]s"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let dx: number;" numlines="1" declaredvars="dx"></mutation><next><block type="typescript_statement" id=")I-0`91Z%6u7B`z+}X1M"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let dy: number;" numlines="1" declaredvars="dy"></mutation><next><block type="typescript_statement" id="[CeuZ6/?.L:vRA=wBVvu"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let angulo: number;" numlines="1" declaredvars="angulo"></mutation><next><block type="typescript_statement" id="B_uG,yAlo[I-K67kZf#V"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let vx: number;" numlines="1" declaredvars="vx"></mutation><next><block type="typescript_statement" id="6v!qIl}I2r)TGj:16j(S"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let vy: number;" numlines="1" declaredvars="vy"></mutation><next><block type="controls_if" id="33U9hyP1R?mJ-X%[!JGt"><comment pinned="false" h="80" w="160">Inteligencia Artificial de enemigos.
Calcula la trayectoria de disparo hacia el jugador usando trigonometría (atan2)
y asigna proyectiles diferentes según el tipo de enemigo.</comment><value name="IF0"><shadow type="logic_boolean" id="zK9eS07`?XLhq}b5BQju"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="OC#.sfT5hY*H[}nh]qxP"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="tJ%KJYdc26/WZ6.l8Og@"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="KoRAf]p8;vpDo0/981b`"><value name="BOOL"><shadow type="logic_boolean" id="SNRg+5HN/t@pNQ)KMD8r"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="a2A$?{TaFfXa17dw,hI="><field name="VAR" id="qYrZI+M7VuLXbsS=8sA6">juego_iniciado</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="Gb2=IBl-wA?@UZ@IR-yJ"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="rS4]g5LBQ7L]vh{V-R]N"><field name="VAR" id="`-No8:Jf@eOdQerL=[Rs">en_bus</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="L$LW%qJB5WGrx;@*$p*L"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return" numlines="1"></mutation></block></statement><next><block type="pxt_controls_for_of" id="K`W512@_=lLd.h2P!3~w"><value name="VAR"><block type="variables_get_reporter" id="^a+g,RG3Eg]0TXtOA@_,"><mutation duplicateondrag="true"></mutation><field name="VAR" id=":]ighEVBEcTbI?xkExL@">enemigo_actual</field></block></value><value name="LIST"><block type="allOfKind" id="rN.fZ2mfHz~I5#0kwTsf"><value name="kind"><shadow type="spritekind" id="GuW$TMS+l46?=#(]es)H"><field name="MEMBER">Enemy</field></shadow></value></block></value><statement name="DO"><block type="controls_if" id="0Q-x5FNYp-UZL+^D%@nL"><value name="IF0"><shadow type="logic_boolean" id="qS~J(a{.l%7u+6)4-,J@"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="_?K^m}pL_3zvfdummMuV"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="REo-r|T+:f8^mQ)r5ezu"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="M2?SQSUG^vEx@n`Mm,=!"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id=".*uROBum.P9($Dc6Ww-x"><field name="NUM">0</field></shadow><block type="variables_get" id="N=j;oG+J{xt9M[^4nf}2"><field name="VAR" id=":]ighEVBEcTbI?xkExL@">enemigo_actual</field></block></value><value name="B"><shadow type="math_number" id="q8|TVs|goQ=97;bqcScT"><field name="NUM">0</field></shadow><block type="typescript_expression" id="HgbD6`|+/wde;i@lJON8"><field name="EXPRESSION">null</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="VD8+WaGzRMq3MG/kX:B-"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="6)5tju(^}-;+AIS`XD{?"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="fw?60f|hRU3Q?93#W$~o"><field name="NUM">0</field></shadow><block type="spriteimage" id="VA:~L(_csu%8u!`X0},H"><value name="sprite"><block type="variables_get" id="+Vhm#o3;621#N;lm!Sg_"><field name="VAR" id=":]ighEVBEcTbI?xkExL@">enemigo_actual</field></block></value></block></value><value name="B"><shadow type="math_number" id="Hs9Ks|qQC[CM,H_k}QNZ"><field name="NUM">0</field></shadow><block type="typescript_expression" id="b=0iLu0?w}go/ZBa9XTF"><field name="EXPRESSION">null</field></block></value></block></value></block></value><statement name="DO0"><block type="continue_keyword" id="MRsg;mdhOT?%OM-p+RSH"></block></statement><next><block type="controls_if" id=",#GqDCI:@+@n-}*;D`$i"><value name="IF0"><shadow type="logic_boolean" id="M2*)lh.s=1$Nj{Qs09n3"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="s4sld[/%uJ-5H.Sy7Y}u"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="In7HKc00~weK#wQ]cOV@"><field name="NUM">0</field></shadow><block type="device_random" id="hX.+kI[lyXxR6#ElF`EN"><value name="min"><shadow type="math_number" id="6qsK-/w{w;;jU$r0!r#^"><field name="NUM">0</field></shadow></value><value name="limit"><shadow type="math_number" id="?8ih%LJ8-a(3@TOjqeW("><field name="NUM">100</field></shadow></value></block></value><value name="B"><shadow type="math_number" id=")?(QNy}8H_YL},=yjZ6z"><field name="NUM">50</field></shadow></value></block></value><statement name="DO0"><block type="typescript_statement" id="Gaft~umnvN9(fga)%RXB"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="img_bala = null" numlines="1"></mutation><next><block type="variables_set" id="Mvn@a{vu;0K/rgM(Aeh@"><field name="VAR" id="D%=wsNXoyHLtiSVM4*m?">velocidad_bala</field><value name="VALUE"><shadow type="math_number" id="qR?s*/gH)6r=8MGytX^%"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="Wq5;Qry7TQp@p_jh~Ej!"><field name="VAR" id="#63~Vn-Pih^GeEVn1?|z">vida_bala</field><value name="VALUE"><shadow type="math_number" id="-wd7q1{NPf[K`,6x8[]g"><field name="NUM">0</field></shadow></value><next><block type="controls_if" id="^@mmOcI%2*yHVo~SXMKx"><mutation elseif="2"></mutation><value name="IF0"><shadow type="logic_boolean" id="c-IR^w$tK|!v:y2z0szb"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="gbrZmF_YiXm)Ioy(.kVf"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="%^W(e^Ir0fYyPW)ylR#5"><field name="NUM">0</field></shadow><block type="spriteimage" id="n)3v}?(1Hgj!7(mIw1$A"><value name="sprite"><block type="variables_get" id="Al|t;(/Q%y$D$,mA]}rP"><field name="VAR" id=":]ighEVBEcTbI?xkExL@">enemigo_actual</field></block></value></block></value><value name="B"><shadow type="math_number" id="gD_AWpo5t:M/zlgg?g)P"><field name="NUM">0</field></shadow><block type="variables_get" id="LIwgx{sx?l/bwu{Oi}FQ"><field name="VAR" id="x|=6}CB=qJ|VPQldiI,e">img_enemigo1</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="p}l3.P0J,wNPzL2P1kW6"><field name="VAR" id="#ShN(v+.!;_$I1hiyIwA">img_bala</field><value name="VALUE"><shadow type="math_number" id="qVrZVIeXeVBTc#qZ2:2d"><field name="NUM">0</field></shadow><block type="screen_image_picker" id=";Y1.yS/;aL`q+q}[o2e-"><field name="img">assets.image`disparo1`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image8"}}</data></block></value><next><block type="variables_set" id=")5zGXBeYddrx}ft:y1z)"><field name="VAR" id="D%=wsNXoyHLtiSVM4*m?">velocidad_bala</field><value name="VALUE"><shadow type="math_number" id="RL)}@5mw@s~Y$bzfrmzH"><field name="NUM">60</field></shadow></value><next><block type="variables_set" id="9|3Et2^/uGMOll/3)^-e"><field name="VAR" id="#63~Vn-Pih^GeEVn1?|z">vida_bala</field><value name="VALUE"><shadow type="math_number" id="R_B|AS@{]ODWP|so~r:O"><field name="NUM">100</field></shadow></value></block></next></block></next></block></statement><value name="IF1"><shadow type="logic_boolean" id="C~+c7o[^Ik)nV/R!J1(Z"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="eVorIMhGEY*2ySU]}fOG"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="dz,t$OOrl$zUq1Bn2-_:"><field name="NUM">0</field></shadow><block type="spriteimage" id="VQkeUq}`#]3yU];]SlQO"><value name="sprite"><block type="variables_get" id="t?:7DYfq:z99$LRfji8*"><field name="VAR" id=":]ighEVBEcTbI?xkExL@">enemigo_actual</field></block></value></block></value><value name="B"><shadow type="math_number" id="(g~Px-]ah:Mu*XJL]Za]"><field name="NUM">0</field></shadow><block type="variables_get" id="SP/uR=X~HrsY-c3-%X62"><field name="VAR" id="m0:rnd7j?YNN!TZ9-,{+">img_enemigo2</field></block></value></block></value><statement name="DO1"><block type="variables_set" id="xk:h4_Ytq%s.Jy~YT.rx"><field name="VAR" id="#ShN(v+.!;_$I1hiyIwA">img_bala</field><value name="VALUE"><shadow type="math_number" id="m4$C1svXBwmaq]rxGVba"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="7]uQ]~]s1]wz_z@=ERUP"><field name="img">assets.image`disparo2`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image25"}}</data></block></value><next><block type="variables_set" id="kiS:F|.cH:*U|jif#Q=9"><field name="VAR" id="D%=wsNXoyHLtiSVM4*m?">velocidad_bala</field><value name="VALUE"><shadow type="math_number" id="0NS.7{JwEFrg)fnk{CF="><field name="NUM">180</field></shadow></value><next><block type="variables_set" id="QeD@2Q;uGtt|qKOlO7Fq"><field name="VAR" id="#63~Vn-Pih^GeEVn1?|z">vida_bala</field><value name="VALUE"><shadow type="math_number" id=")^S`%9GX!OYcg2iF2~Hy"><field name="NUM">3000</field></shadow></value></block></next></block></next></block></statement><value name="IF2"><shadow type="logic_boolean" id="xTo/e{V`!|e:s^hvb5:q"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="XT]4]nlwCfh+8#WtT4xX"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id=":~}|A(oczu#DsdIH^I8_"><field name="NUM">0</field></shadow><block type="spriteimage" id="Q1;BX3c)d9U4yWOiuto9"><value name="sprite"><block type="variables_get" id="+IoY^bNS0$j]0-%b6#{["><field name="VAR" id=":]ighEVBEcTbI?xkExL@">enemigo_actual</field></block></value></block></value><value name="B"><shadow type="math_number" id="7i)w3QLWf?TXc6GPQRT;"><field name="NUM">0</field></shadow><block type="variables_get" id="pG@cKW1/(pjrISU~EEe?"><field name="VAR" id="*6Z$^]}6lKEWB2LlPzIX">img_enemigo3</field></block></value></block></value><statement name="DO2"><block type="variables_set" id="#d:PNg!wnIp#IUzLmR4A"><field name="VAR" id="#ShN(v+.!;_$I1hiyIwA">img_bala</field><value name="VALUE"><shadow type="math_number" id="Cv=l/ll]PI._UF+*oa)A"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="nf]+:vX3?29DrUD*Cg#!"><field name="img">assets.image`disparo3`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image23"}}</data></block></value><next><block type="variables_set" id="UFTN|%AE1pZP^zv!aNT3"><field name="VAR" id="D%=wsNXoyHLtiSVM4*m?">velocidad_bala</field><value name="VALUE"><shadow type="math_number" id="O)HQEKSR6e{8dkQD.[43"><field name="NUM">100</field></shadow></value><next><block type="variables_set" id="t6I~vW|DYL~Hq+`p!Su1"><field name="VAR" id="#63~Vn-Pih^GeEVn1?|z">vida_bala</field><value name="VALUE"><shadow type="math_number" id="?}bLnS]bQkU!d!k!*DBX"><field name="NUM">2000</field></shadow></value></block></next></block></next></block></statement><next><block type="controls_if" id=")gr47!+LJN:iakLmys~{"><value name="IF0"><shadow type="logic_boolean" id="xFXaBz()w-l.50Yl7,B%"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="LY9DwH7I{PAnP_;Wrum/"><field name="OP">NEQ</field><value name="A"><shadow type="math_number" id="*2IWILl)~@I*fb;B!MN7"><field name="NUM">0</field></shadow><block type="variables_get" id="jdEQnZiXPf=cT81o^5|*"><field name="VAR" id="#ShN(v+.!;_$I1hiyIwA">img_bala</field></block></value><value name="B"><shadow type="math_number" id="/Q1}UGjulzx;sw{:mO=p"><field name="NUM">0</field></shadow><block type="typescript_expression" id="__F^.Ow3}=-,Y!1bV?`k"><field name="EXPRESSION">null</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="S*d3e`@ivWZI1bEb4t%+"><field name="VAR" id="{8oRZGCylJ.}KN78`NpV">bala</field><value name="VALUE"><shadow type="math_number" id="?9EYEceQo6Qj*y6(G7hJ"><field name="NUM">0</field></shadow><block type="spritescreateprojectilefromsprite" id="R3K~9[-B0kMeg!C2s$9W"><value name="img"><shadow type="screen_image_picker" id="X49XzDI2]A*SUR5kP[2["><field name="img"></field></shadow><block type="variables_get" id="}*jNhqSiBfq)3rKI3(63"><field name="VAR" id="#ShN(v+.!;_$I1hiyIwA">img_bala</field></block></value><value name="sprite"><block type="variables_get" id="k;##kUj=]jgM.rP!nba:"><field name="VAR" id=":]ighEVBEcTbI?xkExL@">enemigo_actual</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="3q`Z-5Bj[Hrl~kKK7t`|"><field name="speed">0</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id="AvbYR{8~TXEPNV:{g7qn"><field name="speed">0</field></shadow></value></block></value><next><block type="spritesetkind" id="0AjVQr.tRQ_tHns^nrkn"><value name="sprite"><block type="variables_get" id="oA!Ri5E5Woa/6cBC393["><field name="VAR" id="{8oRZGCylJ.}KN78`NpV">bala</field></block></value><value name="kind"><shadow type="spritekind" id="}a^I**j-^{#WT?{:{MU*"><field name="MEMBER">Player</field></shadow><block type="typescript_expression" id="Il=!n~]t]5r8#nEbp$bH"><field name="EXPRESSION">SpriteKind.BalaEnemiga</field></block></value><next><block type="variables_set" id=".P2D+#,:Q/S$nJ,GJ$3C"><field name="VAR" id="iP:0r1]=A@AA_bcRTi;;">dx</field><value name="VALUE"><shadow type="math_number" id="ls-9$;_@SPF}-tZD$Q]4"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="xMhP/kIVpL_mW:PO}u$9"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="lz!2`H;aF{dpV==kfdvA"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="Kh@^tE(waK))m7SXEh[B"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="lh1S|D?w+_L)2}.uzhu~"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value></block></value><value name="B"><shadow type="math_number" id="~L=[GnD8b0YR0fIUxy!j"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="0fvCEZ!cT-;PoAr1GR_5"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="^!DyLWvmc0T0_j({p9qJ"><field name="VAR" id=":]ighEVBEcTbI?xkExL@">enemigo_actual</field></block></value></block></value></block></value><next><block type="variables_set" id="2ISE~k%N@oMmSvl.PD?H"><field name="VAR" id="8IFaJ)Zo{3MC7Xpbsr)@">dy</field><value name="VALUE"><shadow type="math_number" id="-fr8V6*fn,5)BK0aS(9L"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="ZJB!SP+n{@,!tcPw~WWT"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="0)GXKM?EFOoDZTqB-0=#"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="g`Waqb+kp8~+Sd*MfMcj"><field name="property">Sprite.y</field><value name="mySprite"><block type="variables_get" id="+$]Wjy;p6^A#@Hx*PV}W"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value></block></value><value name="B"><shadow type="math_number" id="3bI:.|mnkU(juO,d*]W9"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id=";X3GJfZX?~.HS94Om8;v"><field name="property">Sprite.y</field><value name="mySprite"><block type="variables_get" id=")S~z,XmE!WzLkreO`$H,"><field name="VAR" id=":]ighEVBEcTbI?xkExL@">enemigo_actual</field></block></value></block></value></block></value><next><block type="variables_set" id="M[|fjMTH?`v12MGejNL/"><field name="VAR" id="9eOWsX6{xf,~P^!u_l,d">angulo</field><value name="VALUE"><shadow type="math_number" id="6}~7qETe?.th@3|~U4Al"><field name="NUM">0</field></shadow><block type="math_js_op" id=":;1}O!{S6}8j[!]TFitr"><mutation xmlns="http://www.w3.org/1999/xhtml" op-type="binary"></mutation><field name="OP">atan2</field><value name="ARG0"><shadow type="math_number" id="Q{cG,xBg}(B.rv?ixvwz"><field name="NUM">0</field></shadow><block type="variables_get" id="[7X`JbuaF!tqP$PiP?E#"><field name="VAR" id="8IFaJ)Zo{3MC7Xpbsr)@">dy</field></block></value><value name="ARG1"><shadow type="math_number" id="(5}HT}3.mT_/nT7.]i~*"><field name="NUM">0</field></shadow><block type="variables_get" id="Yk@hRX#%$?eFio_euJzL"><field name="VAR" id="iP:0r1]=A@AA_bcRTi;;">dx</field></block></value></block></value><next><block type="variables_set" id="bF^^B,kbz!m-]TDmj;va"><field name="VAR" id="V)veLLmVj~;$Np~iR,xf">vx</field><value name="VALUE"><shadow type="math_number" id="R|8OMkh7{ga}7^}[1+n~"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="EfPfjWa2$E;.@Fp%ElF."><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="U8SixzJ!;5@pt9+38I/~"><field name="NUM">0</field></shadow><block type="math_js_op" id="d=U]h6w[`LBg2#j?]p9a"><mutation xmlns="http://www.w3.org/1999/xhtml" op-type="unary"></mutation><field name="OP">cos</field><value name="ARG0"><shadow type="math_number" id="B{%uw:MW|C;8$dYy;j0D"><field name="NUM">0</field></shadow><block type="variables_get" id="B]DMfl3/LGYpr%yTPy7G"><field name="VAR" id="9eOWsX6{xf,~P^!u_l,d">angulo</field></block></value></block></value><value name="B"><shadow type="math_number" id="MYG]B[iMCya0[56V936K"><field name="NUM">0</field></shadow><block type="variables_get" id="BqQFda6gZv@~V.Do/_5%"><field name="VAR" id="D%=wsNXoyHLtiSVM4*m?">velocidad_bala</field></block></value></block></value><next><block type="variables_set" id="?F~P*YuJK;fjAjVgp6kf"><field name="VAR" id="dEnWrsq4fCxg,6/2bZ{U">vy</field><value name="VALUE"><shadow type="math_number" id="Zd4FX^.:2]-k@Gdfyk@_"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="CZ7rVU1yRgg,IDr!7Z5z"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id=".n!6c@J({LT?2`FP^R8*"><field name="NUM">0</field></shadow><block type="math_js_op" id="o+R/DrzfF|x[Ufbu(]8:"><mutation xmlns="http://www.w3.org/1999/xhtml" op-type="unary"></mutation><field name="OP">sin</field><value name="ARG0"><shadow type="math_number" id="$npS8`^rPjQ8;q}Sk)/z"><field name="NUM">0</field></shadow><block type="variables_get" id="xD;Lr-Lt7l{G@W/j~EI$"><field name="VAR" id="9eOWsX6{xf,~P^!u_l,d">angulo</field></block></value></block></value><value name="B"><shadow type="math_number" id="gTvfBoa(*_PolkRh4lXC"><field name="NUM">0</field></shadow><block type="variables_get" id=":Avyqo0CY~x$b!P6*f~!"><field name="VAR" id="D%=wsNXoyHLtiSVM4*m?">velocidad_bala</field></block></value></block></value><next><block type="spritesetvel" id="P(a/;/Yrz#agB;HMA[B+"><value name="sprite"><block type="variables_get" id="c]X[`go9ROf/9/%(#Vlw"><field name="VAR" id="{8oRZGCylJ.}KN78`NpV">bala</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="d1++~#zRxs;_2O:K6BB4"><field name="speed">50</field></shadow><block type="variables_get" id="x~xYRY5H}FBqn6jUpD8/"><field name="VAR" id="V)veLLmVj~;$Np~iR,xf">vx</field></block></value><value name="vy"><shadow type="spriteSpeedPicker" id="i7yMrk^A9My1KWIyOUAs"><field name="speed">50</field></shadow><block type="variables_get" id="hV;d-R+b1ns2,?b*{[RR"><field name="VAR" id="dEnWrsq4fCxg,6/2bZ{U">vy</field></block></value><next><block type="Sprite_blockCombine_set" id="dv};XU8EF577I6J4j|-G"><field name="property">Sprite.lifespan</field><value name="mySprite"><block type="variables_get" id=".+.N*`y]wJxn1Y;g.5mb"><field name="VAR" id="{8oRZGCylJ.}KN78`NpV">bala</field></block></value><value name="value"><block type="variables_get" id="+9P(j(fZJ1mXVDGm2FCG"><field name="VAR" id="#63~Vn-Pih^GeEVn1?|z">vida_bala</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></statement></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="gameupdate" id="z4`]aQ,__5x)R*hq#0D|" x="2206" y="20"><statement name="HANDLER"><block type="controls_if" id="py-manmjL{4MX!Y|IjhT"><comment pinned="false" h="80" w="160">Comprobación continua: Si el autobús sale del mapa, fuerza el respawn</comment><value name="IF0"><shadow type="logic_boolean" id="Oy2b:dj)sAxz*/sK}DZp"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id=")fri?MqOH(.MIKMkS^X."><value name="BOOL"><shadow type="logic_boolean" id="tnGt1WZ1MT5v~w=3CT~K"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="|2xN__%0jT|ixB?%*zb9"><field name="VAR" id="qYrZI+M7VuLXbsS=8sA6">juego_iniciado</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="cmeW9,O4n*g8OH!N+[r%"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return" numlines="1"></mutation></block></statement><next><block type="controls_if" id="RL/Hb!Wl86|5GKiL`b=E"><value name="IF0"><shadow type="logic_boolean" id="F:KCu9:kC32R/i6c-kn8"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="oim|@G-##awJ:^A7Rb+~"><field name="VAR" id="`-No8:Jf@eOdQerL=[Rs">en_bus</field></block></value><statement name="DO0"><block type="spritesetpos" id="~@CE2}nk^xWCI-g*uk8~"><value name="sprite"><block type="variables_get" id="Wu^RJP|c!-5tl4_shC;N"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="x"><shadow type="positionPicker" id="NkihmJhZF;Biu$uPCl-E"><field name="index">0</field></shadow><block type="Sprite_blockCombine_get" id="{R8-V#wi8D8Y,{-PuwIk"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="DyjHy}xRb#d!kPmaGWWl"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></value><value name="y"><shadow type="positionPicker" id="r5-Jw=DTnuV?4.$;#}ef"><field name="index">0</field></shadow><block type="Sprite_blockCombine_get" id="+!x}aY77z%^d^bB0$}ZK"><field name="property">Sprite.y</field><value name="mySprite"><block type="variables_get" id="u9Mw)g!95opM_#EFKC8V"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></value><next><block type="controls_if" id="@B?aPduf(~}.,KhV11P}"><value name="IF0"><shadow type="logic_boolean" id="@W#|3#p_UJ-}*6fb@`K9"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id=",My.VV=K5dJ@.}eV(ge?"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="Ju%JG=K,{MVu,p=m8Ls*"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="L6{qqVikKDS0z$+y`1X-"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="N_.@tU`+/Pc`|dbbkBrw"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="@XRjTeb.*HzR}zPB#*Fq"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="dwVQt/70H~c9JPkmG)19"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></value><value name="B"><shadow type="math_number" id="iOPSyBD{w%l*XK81z)s5"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="ZVt|(svfn!jw/S@J1(j["><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="$NQY^V/qeYrM?ts#M;)3"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="Xbo5bHTG%x[^H8K*s0z("><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="|f)7ED:Hod=T=XFvgbX1"><field name="NUM">114</field></shadow></value><value name="B"><shadow type="math_number" id="P%ZGnxJ-:d:zOk|{FfD_"><field name="NUM">16</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="(rRD0@Nr?1/Z8@M)}U0u"><field name="NUM">40</field></shadow></value></block></value></block></value><value name="B"><shadow type="logic_boolean" id="_D/t{~ENDm9R]d0709:J"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="m4ZH)Ub;6yw)og+mkCa|"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="zytr!1#f_XykB|eF^Vr^"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="{}=fcrO~`RX?52(86XV:"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="-3=*-gZ#}tTt3JABC7U}"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></value><value name="B"><shadow type="math_number" id="59tip!v!@@2T#.*]O;OI"><field name="NUM">-40</field></shadow></value></block></value></block></value><statement name="DO0"><block type="spritedestroy2" id="UKu1pczH@NdlK7nO4brV"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><field name="effect">effects.spray</field><value name="sprite"><block type="variables_get" id="GB_sp?+w!~t{1qBpXv){"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value><next><block type="variables_set" id="jSyn!$9qtx[y$fls!/mR"><field name="VAR" id="`-No8:Jf@eOdQerL=[Rs">en_bus</field><value name="VALUE"><shadow type="math_number" id="jt{a0mzdtz!{ruva@!Pt"><field name="NUM">0</field></shadow><block type="logic_boolean" id="pkmB(#RGB1whf*6LfKfy"><field name="BOOL">FALSE</field></block></value><next><block type="function_call" id="FyHLNPtXDK?oFLvs)u%P"><mutation name="spawnear_npcs" functionid="N23b2:)[)3%9UrauhzQb"></mutation></block></next></block></next></block></statement></block></next></block></statement></block></next></block></statement></block><block type="gameupdate" id="(a-9G4gA^dIEjp=+$@Du" x="3451" y="20"><statement name="HANDLER"><block type="typescript_statement" id="O]N~Li07Z0U)Bn011V=z"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let MAP_SIZE2: number;" numlines="1" declaredvars="MAP_SIZE2"></mutation><next><block type="controls_if" id="!QLHtz^v]gMYd:jynS0]"><comment pinned="false" h="80" w="160">Control de animaciones del jugador:
Detecta si se mueve para detener la animación si está quieto
y actualiza la dirección para apuntar correctamente al disparar.</comment><value name="IF0"><shadow type="logic_boolean" id="m#X%=:|VK*8`=b}^]7L2"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id=")2zC+f)3c#,M}(8?iD:X"><value name="BOOL"><shadow type="logic_boolean" id="8hS0Nq*+4g7kh[0fn(?6"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="$@5j]tFq/o]o(B+#5#FW"><field name="VAR" id="qYrZI+M7VuLXbsS=8sA6">juego_iniciado</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="/fNCM1_Vd8n3Sk%p)47T"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return" numlines="1"></mutation></block></statement><next><block type="controls_if" id="lvyyKO^lZ#=%2/JbKQ2("><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="wki+BiCYqMsFv_|Br}wQ"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="Vo:U7aEKf4|4$S~N,pRM"><field name="VAR" id="`-No8:Jf@eOdQerL=[Rs">en_bus</field></block></value><statement name="DO0"><block type="variables_set" id="O5J(wMPe^i+6^7(]hlUT"><field name="VAR" id="yW^Lr-{b(ET09ek7K;k*">MAP_SIZE2</field><value name="VALUE"><shadow type="math_number" id="bU_Ae%tTy+c5p1{hyV#~"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="8Rmw$ptB{(yRRGTN{}n*"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="K#4vD,|4WN%EiFU13w@."><field name="NUM">114</field></shadow></value><value name="B"><shadow type="math_number" id="AnLz8Bo0xex#yjY7#(p,"><field name="NUM">16</field></shadow></value></block></value><next><block type="controls_if" id="C#Ds#Jl=){$/CN5]TnI{"><value name="IF0"><shadow type="logic_boolean" id="NF_NBJE@Mb_Uevb,n080"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="=cF@S(rB?PAZTak9LI`/"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="w3j0(FuBHONS4+E`]u.F"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="h*DeUS}B08#?iV{JKoIR"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="yqi9s/O5%qkSFcyw?+$u"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="+n3^BxE:U=]XnG:z^6-B"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="d;5H}aCD:X9p.^CQ0ohc"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="X!cXMH#wC0F=2M}q+,J2"><field name="property">Sprite.vx</field><value name="mySprite"><block type="variables_get" id="AV]0u6`_8|is;S6O0_MF"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></value><value name="B"><shadow type="math_number" id="}CT:;$YOJr}:`XsT(-k*"><field name="NUM">0</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="yJ}uH`Li)5@J`TV9D[St"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="tz,t#!c-lpLSE]GHLl~6"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="J7w@:J5_-]u[5)^QjdzJ"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="]Q{GBy=8Np)t{pQ@Cnhs"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="ptv0.aV$iZEM|oT2L_bw"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></value><value name="B"><shadow type="math_number" id="?kbo,Kn-ljPayj[jUhQB"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="Gs)T-Z*n`d~y5_T;0p18"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="$Kb5c-lRWL[`Yw}H%v%|"><field name="NUM">0</field></shadow><block type="variables_get" id="H)bO4ZP2TU`LOmm]89rq"><field name="VAR" id="yW^Lr-{b(ET09ek7K;k*">MAP_SIZE2</field></block></value><value name="B"><shadow type="math_number" id="56F2f9xO~T}Yy[vs{UE4"><field name="NUM">40</field></shadow></value></block></value></block></value></block></value><value name="B"><shadow type="logic_boolean" id="WodBSET`J3FIWp`N!En0"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="},+bv0Ad32qR*^F8.g]Z"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="or{1z31bDo,O#sA^QG_R"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=":ocQ{82iotmG0uft)HNo"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="}kvW8uL5nsDVsr?UD?v4"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="h2T#5;9}~E`h0Wg#I5im"><field name="property">Sprite.vx</field><value name="mySprite"><block type="variables_get" id="LuwDp#s5q.G.X`)D)Zd!"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></value><value name="B"><shadow type="math_number" id="LvRti$djF;7n#9BAB5zS"><field name="NUM">0</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="!9yow@xlWa|FkA3Cmi:8"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=",+p}toamx1=W]z(YZx8["><field name="OP">LT</field><value name="A"><shadow type="math_number" id="L.*yUbL1]i?[S0pwrSvT"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="//Y`Ytx0P~/V;,G,XxJ{"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="}6aPwS@d1Q5z4#w=#d4["><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></value><value name="B"><shadow type="math_number" id="o}VKBWd#)l=ASm[Pa62z"><field name="NUM">-40</field></shadow></value></block></value></block></value></block></value><statement name="DO0"><block type="spritesetpos" id=";vvdt%+c=h,[sE:4W(#z"><value name="sprite"><block type="variables_get" id="Wc!t;[44NS|zE5u).?Fo"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="x"><shadow type="positionPicker" id=",/}H1GJofb~B!ufeB3G3"><field name="index">0</field></shadow><block type="math_arithmetic" id="_(C5bXsaBH%s*/RJn8(^"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id=",TaZn;.O+XE.AjS/vhW`"><field name="NUM">0</field></shadow><block type="Sprite_blockCombine_get" id="vgwrqstD+dL]zcyoEz}e"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="_naTeq,[XA{^FoZjT)@t"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></value><value name="B"><shadow type="math_number" id="gx6vmx-*RBR_]}GZHhZ2"><field name="NUM">20</field></shadow></value></block></value><value name="y"><shadow type="positionPicker" id="Y;eC:U+GFa[/8L+oqrge"><field name="index">0</field></shadow><block type="Sprite_blockCombine_get" id="qVW;0*ck(E=N:KCm`qnI"><field name="property">Sprite.y</field><value name="mySprite"><block type="variables_get" id=":+IPr|:rybheenkqqbDC"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></value><next><block type="game_control_sprite" id="Y43ZuF#qIcl}|]~4]G5;"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="2" _input_init="true"></mutation><value name="sprite"><block type="variables_get" id="Vp3@FB,8JIZ$~,x8B%{c"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="-h:L;86mXKy{E.-JRRta"><field name="speed">100</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id="9~AM)M0Zg^nI2]8Q8Xfi"><field name="speed">100</field></shadow></value><next><block type="camerafollow" id="QX?f?O{kn@S#m68LglLW"><value name="sprite"><block type="variables_get" id="#{jrj*y;;Nw[[8{*Z=9%"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><next><block type="spritedestroy2" id="c|??,gfHknMx@4n065!H"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="2" _input_init="true"></mutation><field name="effect">effects.trail</field><value name="sprite"><block type="variables_get" id="RJmx(j25igQ40w)}HDj|"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value><value name="duration"><shadow type="timePicker" id="]v}Lv)_@*UC=Y#a$7`lH"><field name="ms">500</field></shadow></value><next><block type="variables_set" id="7OLZO59baI4j)v65Nu`o"><field name="VAR" id="`-No8:Jf@eOdQerL=[Rs">en_bus</field><value name="VALUE"><shadow type="math_number" id="1#2`NWPA1zlxb}s-fYN^"><field name="NUM">0</field></shadow><block type="logic_boolean" id="fj3I4/;2[ayQ;xb}1/%t"><field name="BOOL">FALSE</field></block></value><next><block type="function_call" id="wWXUMg,^Uwe%(YmFcZ{L"><mutation name="spawnear_npcs" functionid="N23b2:)[)3%9UrauhzQb"></mutation></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></statement><statement name="ELSE"><block type="variables_set" id="!}-ciE!jpX.F;/}0OqG."><field name="VAR" id="9d9]U#M2tvK?O@hCDc3^">moviendo</field><value name="VALUE"><shadow type="math_number" id="rtGP-rz/UcH^)dP|Hf_m"><field name="NUM">0</field></shadow><block type="logic_operation" id="XR^d.1bJw+AIDj3p!O1t"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id=";=#rb#h(u+~!b$6ik}V-"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="OFobpfB/F_1Kf)EcSoN^"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="ORl3xw2|i%N`#4I,K.-_"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="|vAh|ud0B`N/GYu)4k}B"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="U;OdtCmTXZ53nw|Bux,G"><field name="BOOL">TRUE</field></shadow><block type="keyispressed" id="D!wEKiVo[U-_}3nGnNZo"><field name="button">controller.down</field></block></value><value name="B"><shadow type="logic_boolean" id="a=~tcz@J%$)}zTqWEE59"><field name="BOOL">TRUE</field></shadow><block type="keyispressed" id="noc.SURzA|xNt~zWE)Ee"><field name="button">controller.left</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="Yj,6SnW4]_T:nLgSA+m?"><field name="BOOL">TRUE</field></shadow><block type="keyispressed" id="?=]i2$k4hzql{YO:[s9P"><field name="button">controller.up</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="h*7+Yu^!QBLBR7nL4ZCF"><field name="BOOL">TRUE</field></shadow><block type="keyispressed" id="efysfmId;mi[qhK2{H$}"><field name="button">controller.right</field></block></value></block></value><next><block type="controls_if" id="sEnJ=ui]i1c0/tZ8gy(j"><mutation elseif="3"></mutation><value name="IF0"><shadow type="logic_boolean" id="]ogl8Eg~~r4k6MY,/n$c"><field name="BOOL">TRUE</field></shadow><block type="keyispressed" id="GAD9-lS~9z;P${2,sYI,"><field name="button">controller.up</field></block></value><statement name="DO0"><block type="variables_set" id="MyId8n(W?MTDRZpoxOQ#"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field><value name="VALUE"><shadow type="math_number" id="{zezr!R=~f@egvuyJLm5"><field name="NUM">0</field></shadow><block type="text" id="vzXn~etARHB4_{drnaH]"><field name="TEXT">arriba</field></block></value></block></statement><value name="IF1"><shadow type="logic_boolean" id="|ge6{*7cpt`+vaYt8hV@"><field name="BOOL">TRUE</field></shadow><block type="keyispressed" id=";VAf;g#?IIVA^v(mpaX["><field name="button">controller.down</field></block></value><statement name="DO1"><block type="variables_set" id="64+d/ysV.9:^hLF$]$!u"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field><value name="VALUE"><shadow type="math_number" id="lt_On~GY=)KIUdQ*8O8#"><field name="NUM">0</field></shadow><block type="text" id="yror~!~U/s6U95HX@xeA"><field name="TEXT">abajo</field></block></value></block></statement><value name="IF2"><shadow type="logic_boolean" id="4a!2Si7J03fs4-0%bq`t"><field name="BOOL">TRUE</field></shadow><block type="keyispressed" id="iq}lf0?^W,;?`e3W7q`1"><field name="button">controller.left</field></block></value><statement name="DO2"><block type="variables_set" id="[nZUr(yH*tlF:F%nVL+!"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field><value name="VALUE"><shadow type="math_number" id="*a$.(bp9`8zq=lI5JGj*"><field name="NUM">0</field></shadow><block type="text" id=",*DC;KKwg]O3]JQe[,@}"><field name="TEXT">izquierda</field></block></value></block></statement><value name="IF3"><shadow type="logic_boolean" id="{yv:?p2b,.v5x/|@jQ:%"><field name="BOOL">TRUE</field></shadow><block type="keyispressed" id="lFwdv4A?U]YN[!M^f*;k"><field name="button">controller.right</field></block></value><statement name="DO3"><block type="variables_set" id="c;L{=d9IK(R=KO)QAczy"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field><value name="VALUE"><shadow type="math_number" id="MF*W`q@wMjAUxy^Zf!AA"><field name="NUM">0</field></shadow><block type="text" id="TMgNN^+:4L8J6a5:4:W3"><field name="TEXT">derecha</field></block></value></block></statement><next><block type="controls_if" id=":]S11v+/].jvmalz=##N"><value name="IF0"><shadow type="logic_boolean" id="*gXZ{@`j;$_o..:[9)LF"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="iAP0-oZre?J{dato|XA]"><value name="BOOL"><shadow type="logic_boolean" id="-]O@m3g6p4[DR4?Ry5B-"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="$eKm)mNteQX5Rj=}}RCo"><field name="VAR" id="9d9]U#M2tvK?O@hCDc3^">moviendo</field></block></value></block></value><statement name="DO0"><block type="stop_animations" id="a;hcrhcx*CpsB)@?5D|~"><field name="type">animation.AnimationTypes.All</field><value name="sprite"><block type="variables_get" id="8ZoP$oI7#LqFiRXR7*r("><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value></block></statement></block></next></block></next></block></statement></block></next></block></next></block></statement></block><block type="keyonevent" id="XU#TV_Zx4)on;e)$QFZ(" x="5798" y="20"><field name="button">controller.left</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="controls_if" id="Dl7K#2Ql.m.?3?VrDx3d"><value name="IF0"><shadow type="logic_boolean" id="UKOI.*p,/,2zS=`]2d^N"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="T7:Pcz)lXC,f%_~M-3F^"><value name="BOOL"><shadow type="logic_boolean" id="yV7Eo_^JT=!Ps[_{x#tD"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="Sj)[^Du$f+GH}^Bl*;r0"><field name="VAR" id="qYrZI+M7VuLXbsS=8sA6">juego_iniciado</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="]A,=:W_F,Q^8`rE3aG~a"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return" numlines="1"></mutation></block></statement><next><block type="run_image_animation" id="K/9X]SLwtyJsOn)mjo%K"><value name="sprite"><block type="variables_get" id="bJt#|`_=35%7xe,YBcc!"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="frames"><shadow type="animation_editor" id="E[3oIbp2]=JEYhXnz;Ot"><field name="frames">assets.animation`animado_izq`</field><data>{"commentRefs":[],"fieldData":{"frames":"myAnimations.anim3"}}</data></shadow></value><value name="frameInterval"><shadow type="timePicker" id="Vk8MEKLsPSK7uk?IrHKD"><field name="ms">200</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="+IK}m*Ocn*+!poc8c26$"><field name="on">true</field></shadow></value></block></next></block></statement></block><block type="keyonevent" id="r@p~vJuEW@EM0`9JMR2q" x="6249" y="20"><field name="button">controller.A</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="controls_if" id="btGvA1E4Ev2I3L~#xeX?"><comment pinned="false" h="80" w="160">Controlador de estados para el botón A (Acción principal):
1. Menú: Iniciar partida.
2. Autobús: Saltar al mapa.
3. Juego: Disparar arma.</comment><value name="IF0"><shadow type="logic_boolean" id="S=a9`Y{#N(-p;,r2F.,Y"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="k:)?LqJ+oSFkPkd3rjQa"><value name="BOOL"><shadow type="logic_boolean" id="~q0zn;,,2-{n!_xmuoOU"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="@B1hLN=zCI1J/:N_;zVw"><field name="VAR" id="qYrZI+M7VuLXbsS=8sA6">juego_iniciado</field></block></value></block></value><statement name="DO0"><block type="controls_if" id=";-3CJH=fJ-5S)kuKgr!w"><value name="IF0"><shadow type="logic_boolean" id="?[[n(=-umPiyOPsT|oGi"><field name="BOOL">TRUE</field></shadow><block type="spriteoverlapswith" id="Cc!)AL%[07Zz}HG:{q!="><value name="sprite"><block type="variables_get" id=");nPYugD#bVE1Bge[r@P"><field name="VAR" id="_N5OrimrUP_C0VqEmPK.">cursor</field></block></value><value name="other"><block type="variables_get" id="r=??N8cLoGZl)%h68,dm"><field name="VAR" id="?9mW]As6*}F$fMy)VcD^">boton_jugar</field></block></value></block></value><statement name="DO0"><block type="function_call" id="#%H(ZN4Rs_?y{rAW(e0L"><mutation name="iniciar_partida" functionid="9jxrf^cG|UJ_Jn(H/Qf9"></mutation></block></statement><next><block type="typescript_statement" id="/wdjG7dW%{eU(]U{w`tC"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return" numlines="1"></mutation></block></next></block></statement><next><block type="controls_if" id="+r(P;hp$/=m+a2!(B_0|"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="mQdI*9I?H@Mhr0*I$wC."><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="Kek2qKy|92u2X%Ma(22%"><field name="VAR" id="`-No8:Jf@eOdQerL=[Rs">en_bus</field></block></value><statement name="DO0"><block type="spritesetpos" id="(1@4e}G?XJVE`_F]Q,d]"><value name="sprite"><block type="variables_get" id="6MJPLFGh/7jTw2;j~si9"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="x"><shadow type="positionPicker" id="DjcPNG4wexH],P2m4XbF"><field name="index">0</field></shadow><block type="Sprite_blockCombine_get" id="CPw;Z+ApUQ,mX1*i0ThV"><field name="property">Sprite.x</field><value name="mySprite"><block type="variables_get" id="$M!*8^;eb}^Q+]U-NtRO"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></value><value name="y"><shadow type="positionPicker" id="BJT:.!D2js}gF-:ANB_}"><field name="index">0</field></shadow><block type="Sprite_blockCombine_get" id="xp27y,9]cw?0_f(w;)ts"><field name="property">Sprite.y</field><value name="mySprite"><block type="variables_get" id="4ybJ{~!rn]1q#RT?[eN}"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></value><next><block type="game_control_sprite" id="MvlB;V%BIRXS29_=nbwc"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="2" _input_init="true"></mutation><value name="sprite"><block type="variables_get" id="O;r~psMA3+%Pfv:Ov6;0"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="E.rkEIZk$q+]9;.-c^Ql"><field name="speed">100</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id="G7MZN,Kx,KtVosKkN38Y"><field name="speed">100</field></shadow></value><next><block type="camerafollow" id="UsPab.^_b8;AHKPZ|oA5"><value name="sprite"><block type="variables_get" id="AdrUP`Ep3SG,M#@66mkB"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><next><block type="spritedestroy2" id="226k,N7it;16]7!CS*Li"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="2" _input_init="true"></mutation><field name="effect">effects.trail</field><value name="sprite"><block type="variables_get" id="0g0%M],*12|!5(O3^GXe"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value><value name="duration"><shadow type="timePicker" id="-}f6C%V2FCtZmv7x=lU6"><field name="ms">500</field></shadow></value><next><block type="variables_set" id="cec?ppV%u.G#Nb`-~V!}"><field name="VAR" id="`-No8:Jf@eOdQerL=[Rs">en_bus</field><value name="VALUE"><shadow type="math_number" id="1d3o1AM_T^HHBy4H!(HI"><field name="NUM">0</field></shadow><block type="logic_boolean" id="x)a{S.vCdmnItCh:/fDs"><field name="BOOL">FALSE</field></block></value><next><block type="function_call" id="0Di[:dKmEMGCEd{gz4ku"><mutation name="spawnear_npcs" functionid="N23b2:)[)3%9UrauhzQb"></mutation></block></next></block></next></block></next></block></next></block></next></block></statement><statement name="ELSE"><block type="function_call" id="~kiiYNCUEY(A|byG}e@f"><mutation name="disparar" functionid="NG._(n4$+9Y1!x-_$[YX"></mutation></block></statement></block></next></block></statement></block><block type="keyonevent" id="sVbhd*3?GmoI$eODaGvu" x="7066" y="20"><field name="button">controller.B</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="controls_if" id="K$.r.A!Y8uAldNjL7S$Z"><comment pinned="false" h="80" w="160">Botón de interacción secundaria: Abrir cofres</comment><value name="IF0"><shadow type="logic_boolean" id="=oUHebwtw:O7wgAE(0xM"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="=v^F/]sEQ^^Nf22nn|?,"><value name="BOOL"><shadow type="logic_boolean" id="(~|/B=llRHDj3^H:76*+"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="c~Z#1--($a5~BB*1Ipw5"><field name="VAR" id="qYrZI+M7VuLXbsS=8sA6">juego_iniciado</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="YCp:m1-y(y[DnT(-g1RR"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return" numlines="1"></mutation></block></statement><next><block type="function_call" id="O1V|~Jpc9BTyqp1_sYJ7"><mutation name="Abrir_Cofre" functionid="I:$j^lk-~md@6%Se?E,C"></mutation></block></next></block></statement></block><block type="keyonevent" id="kch8.KSZ}IbC~I-m^4Bt" x="20" y="2489"><field name="button">controller.up</field><field name="event">ControllerButtonEvent.Pressed</field><comment pinned="false" h="80" w="160">--- CONTROLES DE MOVIMIENTO ---
Estos eventos capturan la pulsación de teclas para activar
la animación visual correspondiente hacia donde mira el personaje.</comment><statement name="HANDLER"><block type="controls_if" id="G`16XM=Z`+.KOHTOA/RU"><value name="IF0"><shadow type="logic_boolean" id="E{zO~}H;eGh/5Pvpsf32"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="OA?LL_?`kSAxn0}47AJ2"><value name="BOOL"><shadow type="logic_boolean" id="2DU3J)]w[T}Dz8O~j_@r"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="5m;pG]2-Ijk#?m8d5=NM"><field name="VAR" id="qYrZI+M7VuLXbsS=8sA6">juego_iniciado</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="u@Q,=LDi-bv/h7OR=c|D"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return" numlines="1"></mutation></block></statement><next><block type="run_image_animation" id="5)SVd{U|-.kpIqb*Tnm^"><value name="sprite"><block type="variables_get" id="%rjFT6HC^RH]T$/3+R=g"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="frames"><shadow type="animation_editor" id="g]-.R{y_qdOQNC6[@_99"><field name="frames">assets.animation`animado_arriba`</field><data>{"commentRefs":[],"fieldData":{"frames":"myAnimations.anim4"}}</data></shadow></value><value name="frameInterval"><shadow type="timePicker" id="O5Qzlr_J%fS`,}J6LcY0"><field name="ms">200</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="iopRZ5)mS|?Sca%=-?oG"><field name="on">true</field></shadow></value></block></next></block></statement></block><block type="keyonevent" id="=9T_m|k)clgQnsG_6bj2" x="471" y="2489"><field name="button">controller.right</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="controls_if" id="V}CR$%*3HXl2BLgpPSS{"><value name="IF0"><shadow type="logic_boolean" id="h;DH-H=zfJO]sc^+N4u9"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="bpj0lITzkqUJjX,L7!f?"><value name="BOOL"><shadow type="logic_boolean" id="Hi;V7:vSxO0]%V+0^_m~"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="|Z;#J/0WpPYyF[16PIEN"><field name="VAR" id="qYrZI+M7VuLXbsS=8sA6">juego_iniciado</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="`A#DVl}CRQjqJ=*%{W#A"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return" numlines="1"></mutation></block></statement><next><block type="run_image_animation" id="~!ew}50nfmdiI{kAw-J;"><value name="sprite"><block type="variables_get" id=":_*hWRm-nZj#)#Dj(mkw"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="frames"><shadow type="animation_editor" id="7uW8=WrdjAw0**Ox}|lG"><field name="frames">assets.animation`animado_der`</field><data>{"commentRefs":[],"fieldData":{"frames":"myAnimations.anim2"}}</data></shadow></value><value name="frameInterval"><shadow type="timePicker" id="(1dLRY%?v:2]GD{MNFXk"><field name="ms">200</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="i$iC/J)Fa.cJ}x+rzNqv"><field name="on">true</field></shadow></value></block></next></block></statement></block><block type="keyonevent" id="jyA8C=w3EPbjF.:?Gve." x="923" y="2489"><field name="button">controller.down</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="controls_if" id="g{|p8hjhU=@9g%H|7}FU"><value name="IF0"><shadow type="logic_boolean" id="kD*e:s,PjF)#+2==JK~,"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id=")N0cBDwJ*S}oL#?.2GzY"><value name="BOOL"><shadow type="logic_boolean" id="e8_Ia9R~k$}V}$Gv?kc{"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="y^UI2!mbwk9[^OV8$i8B"><field name="VAR" id="qYrZI+M7VuLXbsS=8sA6">juego_iniciado</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="/ig3u$^G^4H4w=bMa)LN"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return" numlines="1"></mutation></block></statement><next><block type="run_image_animation" id="iD{g}c/uCD.$Pwpb{(=J"><value name="sprite"><block type="variables_get" id="Sa4e)AB{qvVqB$[1W5z%"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="frames"><shadow type="animation_editor" id="kuj!)@!fUg|~Sht22Gx,"><field name="frames">assets.animation`animado_abajo`</field><data>{"commentRefs":[],"fieldData":{"frames":"myAnimations.anim1"}}</data></shadow></value><value name="frameInterval"><shadow type="timePicker" id="6?w*~M_Sd5N_lyB6XQFu"><field name="ms">200</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="Tx_EobS;$ZT;yaq.j*p1"><field name="on">true</field></shadow></value></block></next></block></statement></block><block type="spritesoverlap" id=",,6TcW.G1H4U#Q.Pb^14" x="1374" y="2489"><value name="HANDLER_DRAG_PARAM_sprite"><block type="argument_reporter_custom" id="g8tv_np1!ixvlMe3t|g/"><mutation duplicateondrag="true" typename="Sprite"></mutation><field name="VALUE">jugador</field></block></value><value name="kind"><shadow type="spritekind" id="PEuf,HX-!s!xW7O.s9?H"><field name="MEMBER">Player</field></shadow></value><value name="HANDLER_DRAG_PARAM_otherSprite"><block type="argument_reporter_custom" id="_CRTirKota4bzKnIu3jL"><mutation duplicateondrag="true" typename="Sprite"></mutation><field name="VALUE">bala_mala</field></block></value><value name="otherKind"><shadow type="spritekind" id=";a4K]#D$An{Vj4/kNoO?"><field name="MEMBER">Player</field></shadow><block type="typescript_expression" id="DWp+(fu(/Aw-MME[FM)w"><field name="EXPRESSION">SpriteKind.BalaEnemiga</field></block></value><statement name="HANDLER"><block type="controls_if" id="U$s$;z]A@{w/vr1%n]4@"><mutation elseif="2" else="1"></mutation><comment pinned="false" h="80" w="160">Gestión de daño recibido por el jugador.
Detecta el tipo de bala según su imagen para aplicar daño variable (30, 40 o 20).</comment><value name="IF0"><shadow type="logic_boolean" id="m$aKZwjexNg|bOt+,=|g"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="HPBU)yd3!kbZ7%PtC,TC"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="q5j7SSq.44W:fZ=Qq[-B"><field name="NUM">0</field></shadow><block type="spriteimage" id="4O6q5^6}X#W#-mP_oO,k"><value name="sprite"><block type="variables_get" id="[iW{Jg:%${]^+-u^^zX|"><field name="VAR" id="c*5Dd5r8K9MOwHACz|+Y">bala_mala</field></block></value></block></value><value name="B"><shadow type="math_number" id=".FuOQZU]h#R7`ci=vFk-"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="Re_m}KY-`|b1o|*b,mq8"><field name="img">assets.image`disparo1`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image8"}}</data></block></value></block></value><statement name="DO0"><block type="variables_set" id="7pKfY6^~*Gx]3@VRA]z:"><field name="VAR" id="BaD{s(#jX-WSqR1R$eI)">daño_recibido</field><value name="VALUE"><shadow type="math_number" id=",|Mhscg/HWjM:7~3*NS2"><field name="NUM">30</field></shadow></value></block></statement><value name="IF1"><shadow type="logic_boolean" id="nuW9}DaDgG[7ZO5SuDV^"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="jsehSul0[N/lO7|eg#qJ"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="S?Fb^$SN^$3$=Plr9@zx"><field name="NUM">0</field></shadow><block type="spriteimage" id="1|!l1*f@oC}w*.?Q!QD5"><value name="sprite"><block type="variables_get" id=":zqG_?IM5I[F1vh,c4W2"><field name="VAR" id="c*5Dd5r8K9MOwHACz|+Y">bala_mala</field></block></value></block></value><value name="B"><shadow type="math_number" id="yfTBb;Ym+p9:rn.*g={:"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="#(.))5l2_^==irkf7b^_"><field name="img">assets.image`disparo2`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image25"}}</data></block></value></block></value><statement name="DO1"><block type="variables_set" id="2MBin6cs4jZn)/T_LFWI"><field name="VAR" id="BaD{s(#jX-WSqR1R$eI)">daño_recibido</field><comment pinned="false" h="80" w="160">Escopeta</comment><value name="VALUE"><shadow type="math_number" id="Pvs;~K{PpAmLOz*bt+6D"><field name="NUM">40</field></shadow></value></block></statement><value name="IF2"><shadow type="logic_boolean" id="B!fgm$Ej-S_wC|0b#JNR"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="0UJ!JkfN:^O:AF%+FD3w"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="J!y_431PyLhN~-+G=c|7"><field name="NUM">0</field></shadow><block type="spriteimage" id="x$7F#1+OtxesQt?A^4jf"><value name="sprite"><block type="variables_get" id="H4@g(1Di`6[7RO1px1TZ"><field name="VAR" id="c*5Dd5r8K9MOwHACz|+Y">bala_mala</field></block></value></block></value><value name="B"><shadow type="math_number" id="{G5RV-7Yx=0#Zgsh|C:`"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="=R1S/_Zpk.Rta{bJICkY"><field name="img">assets.image`disparo3`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image23"}}</data></block></value></block></value><statement name="DO2"><block type="variables_set" id="Nk.3}J-ra;VJS_Y6g6=Z"><field name="VAR" id="BaD{s(#jX-WSqR1R$eI)">daño_recibido</field><comment pinned="false" h="80" w="160">Francotirador</comment><value name="VALUE"><shadow type="math_number" id="KDpHLhY9WEj$`hxdEzsh"><field name="NUM">20</field></shadow></value></block></statement><statement name="ELSE"><block type="variables_set" id="_zMEe6]e.|wHTe7s]@s*"><field name="VAR" id="BaD{s(#jX-WSqR1R$eI)">daño_recibido</field><comment pinned="false" h="80" w="160">Fusil</comment><value name="VALUE"><shadow type="math_number" id="Vi-V9:hp.S.1qbk](_x#"><field name="NUM">10</field></shadow></value></block></statement><next><block type="spritedestroy2" id="l|:Fc$bK`)AJ8vlnCyMb"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><field name="effect">effects.spray</field><value name="sprite"><block type="variables_get" id="b!Qa4q:(_fWWY~nd|Y|r"><field name="VAR" id="c*5Dd5r8K9MOwHACz|+Y">bala_mala</field></block></value><next><block type="camerashake" id="nsBd@0v=y,m(0NOSZ:Oq"><value name="amplitude"><shadow type="math_number_minmax" id="xOj%L/ATxX*kuaU$6uk}"><mutation min="1" max="8" precision="0"></mutation><field name="SLIDER">4</field></shadow></value><value name="duration"><shadow type="timePicker" id="9GLe)y;aKd;=1;r/jFs-"><field name="ms">500</field></shadow></value><next><block type="controls_if" id="rv~!vCuvL+j^U23tBaSh"><mutation else="1"></mutation><comment pinned="false" h="80" w="160">Verificación del estado de escudo: si está activo, anula el daño</comment><value name="IF0"><shadow type="logic_boolean" id="()Gxw!P:,*RIk5vZMN^d"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="W1yI=;#qv)tOz/#Xhl5g"><field name="VAR" id="d[hYvbV%QFtNzV`?vt=h">tiene_escudo</field></block></value><statement name="DO0"><block type="startEffectOnSprite" id="-sYOLyi3pV]j`?{E)0HQ"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><field name="effect">effects.fountain</field><value name="sprite"><block type="variables_get" id="|kZn[8K7/q?9]F=oWQDh"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="duration"><shadow type="timePicker" id="?ya3+0V8-b.heL(G28[1"><field name="ms">500</field></shadow></value><next><block type="variables_set" id="CB*uF.T`xa|Pv)9Y@}f1"><field name="VAR" id="d[hYvbV%QFtNzV`?vt=h">tiene_escudo</field><value name="VALUE"><shadow type="math_number" id="rJrqCnir#FL{jmZ@TCh#"><field name="NUM">0</field></shadow><block type="logic_boolean" id="KHDQ41wNhvsvEEG^G]~s"><field name="BOOL">FALSE</field></block></value><next><block type="gameSplash" id="H~O9q0PAoYGmINL4[hIJ"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="title"><shadow type="text" id="e@^}Cm=3W-KlUQzqiMp|"><field name="TEXT">¡Escudo roto!</field></shadow></value><value name="subtitle"><shadow type="text" id="h]_?96+F3iQx$L@}=vj+"><field name="TEXT">No recibes daño</field></shadow></value></block></next></block></next></block></statement><statement name="ELSE"><block type="hudChangeLifeBy" id="Ijq??$d4]s^|%pAu;[J."><value name="value"><block type="math_arithmetic" id="k7@9,~webChF(6z7S$c9"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id=":U{[Fdwb6ZsCDoyS$S*P"><field name="NUM">0</field></shadow><block type="variables_get" id="!*7=k.,h5RkfgQdwh,MV"><field name="VAR" id="BaD{s(#jX-WSqR1R$eI)">daño_recibido</field></block></value><value name="B"><shadow type="math_number" id="z1Z,=;uMA7/`rGmuzx0|"><field name="NUM">-1</field></shadow></value></block></value></block></statement></block></next></block></next></block></next></block></statement></block><block type="spritesoverlap" id="T$e;Z;afz[xIcT52.lYY" x="2373" y="2489"><value name="HANDLER_DRAG_PARAM_sprite"><block type="argument_reporter_custom" id="/06y#8TD3NGVRO~%1bp:"><mutation duplicateondrag="true" typename="Sprite"></mutation><field name="VALUE">proyectil2</field></block></value><value name="kind"><shadow type="spritekind" id="*R?X.x*jAUPLYjeB`N[b"><field name="MEMBER">Projectile</field></shadow></value><value name="HANDLER_DRAG_PARAM_otherSprite"><block type="argument_reporter_custom" id="1K]-RW9zDxn/x7nH{.]0"><mutation duplicateondrag="true" typename="Sprite"></mutation><field name="VALUE">enemigo2</field></block></value><value name="otherKind"><shadow type="spritekind" id="(|}(2{)0q0c:EFIHja+}"><field name="MEMBER">Enemy</field></shadow></value><statement name="HANDLER"><block type="spritedestroy2" id="3-jo@OJHu-=_0a^[W12!"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><field name="effect">effects.spray</field><comment pinned="false" h="80" w="160">Evento de impacto de bala del jugador contra enemigo.
En lugar de destruir al enemigo inmediatamente, se reduce la barra de vida vinculada.</comment><value name="sprite"><block type="variables_get" id="O5X(CtfW(j6N?@Z{jxOf"><field name="VAR" id="kpiY68N`Vr4,0iou(.~s">proyectil2</field></block></value><next><block type="variables_set" id="*hZC/CZe*tY{ZKdwcz8P"><field name="VAR" id="}6T/udTZ00Wz+y6+dW@q">barra_enemigo</field><value name="VALUE"><shadow type="math_number" id="=d`tyiyMF7Nnd7f0^TtN"><field name="NUM">0</field></shadow><block type="statusbars_spriteStatusBarIsAttachedTo" id="uR^#tJ%;E.Rdf^hHcMqc"><value name="kind"><shadow type="statusbars_kind" id=")ry2/emm_:b2jNcXCXh{"><field name="MEMBER">EnemyHealth</field></shadow></value><value name="sprite"><block type="variables_get" id="BoJqD0]v.UNsy5cSTN9)"><field name="VAR" id="/3A`h[;OF_TK2Q@@s~68">enemigo2</field></block></value></block></value><next><block type="controls_if" id="tmj6fEe_k4IA47)VS2lZ"><value name="IF0"><shadow type="logic_boolean" id="QR9_)QAs4U$VJfCe-{6M"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="q}DZSh%uO3S%wS#}.*Em"><field name="VAR" id="}6T/udTZ00Wz+y6+dW@q">barra_enemigo</field></block></value><statement name="DO0"><block type="StatusBarSprite_blockCombine_change" id="}WOOG-d9q/Z/yuY9Rq0@"><field name="propiedad">StatusBarSprite.value@set</field><value name="statusbar"><block type="variables_get" id="P5F:X#`R5B-]^*gobm!J"><field name="VAR" id="}6T/udTZ00Wz+y6+dW@q">barra_enemigo</field></block></value><value name="value"><shadow type="math_number" id="b-cbW(iZA7!s%0uo~mm@"><field name="NUM">-20</field></shadow></value><next><block type="startEffectOnSprite" id="3GtXAxOaFV%F89dZtnsx"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><field name="effect">effects.ashes</field><value name="sprite"><block type="variables_get" id="AzRbA|cHv2VX1)yP%S}#"><field name="VAR" id="/3A`h[;OF_TK2Q@@s~68">enemigo2</field></block></value><value name="duration"><shadow type="timePicker" id="sJ6,s%L.PgMw/[/6!V.C"><field name="ms">100</field></shadow></value></block></next></block></statement></block></next></block></next></block></statement></block><block type="statusbars_onZero" id="OVNyi,$Xl-3d[W*uyuHy" x="3289" y="2489"><value name="kind"><shadow type="statusbars_kind" id="GMi=)2D1N-+LtN/~v%xB"><field name="MEMBER">EnemyHealth</field></shadow></value><value name="HANDLER_DRAG_PARAM_status"><block type="argument_reporter_custom" id="V5YL{cnH%T##`s{`YhzP"><mutation duplicateondrag="true" typename="StatusBarSprite"></mutation><field name="VALUE">status</field></block></value><statement name="HANDLER"><block type="variables_set" id="Rks4)UsO,?x!Vo2hT.h4"><field name="VAR" id="iTxS~M$yV-#lz3`KS(6j">enemigo_muerto</field><comment pinned="false" h="80" w="160">Evento de la extensión StatusBar: Se dispara cuando la vida de un enemigo llega a 0.
Gestiona la eliminación del enemigo, puntuación y condición de victoria.</comment><value name="VALUE"><shadow type="math_number" id="FdEx9i_J3w9lDOC;+pQ9"><field name="NUM">0</field></shadow><block type="statusbars_attachSpriteGetter" id="K4NPNKdWP,mEP.:9.%v;"><value name="this"><block type="argument_reporter_custom" id="P^/y*D{aZzyk23$@fo?v"><mutation typename="StatusBarSprite"></mutation><field name="VALUE">status</field></block></value></block></value><next><block type="spritedestroy2" id="=.z4fws7XEj8{_{!y0O}"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="2" _input_init="true"></mutation><field name="effect">effects.fire</field><value name="sprite"><block type="variables_get" id="y])r3j}5@GT|D]Go^2g|"><field name="VAR" id="iTxS~M$yV-#lz3`KS(6j">enemigo_muerto</field></block></value><value name="duration"><shadow type="timePicker" id="mq5Agl$)Xf90h_pt3P)_"><field name="ms">500</field></shadow></value><next><block type="variables_change" id="sYpk0#Z!eC2$+EP)H]c("><field name="VAR" id="#?!=ZDqWN+rjXMW=/b=u">kills</field><value name="VALUE"><shadow type="math_number" id="J74DJDFjY77@]VAbukh8"><field name="NUM">1</field></shadow></value><next><block type="variables_change" id="e.YKM^1Dmgc,S-X*=_n)"><field name="VAR" id="2tUr)E4;,{6Bj?lTN(aS">npcs_vivos</field><value name="VALUE"><shadow type="math_number" id="dU9nt]bNRn2$}?*eCPW-"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="K}4-x!^HlfnC$~}d@^9I"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="0+gr(vMFU[`+,1yC=dq+"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="mZ4?2E?,@R9N8%;s#2}s"><field name="NUM">1</field></shadow></value></block></value><next><block type="hudChangeScoreBy" id="$OK0q@2t]J%!IK,Efc@_"><value name="value"><shadow type="math_number" id="r^0=Ei|w$li~kqgH-;v]"><field name="NUM">1</field></shadow></value><next><block type="controls_if" id="}U8Uyg-.UHxEL!XRB#?Y"><value name="IF0"><shadow type="logic_boolean" id=";IH+2#Vb8;.=Fq27j:^)"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="00wVfn4.n}jcEPQOc,E."><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="qFMB2]j*S};j7SltHksu"><field name="NUM">0</field></shadow><block type="variables_get" id=",tT98@IW2pK]W6GI=g#w"><field name="VAR" id="2tUr)E4;,{6Bj?lTN(aS">npcs_vivos</field></block></value><value name="B"><shadow type="math_number" id="nsSxnm=b{iQt4a0DAn2$"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="gameSplash" id="1hb(WC*]fPM+h]m1zIW["><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="title"><shadow type="text" id="li(WW/5Yp6;-8.e=`bds"><field name="TEXT">VICTORY ROYALE!</field></shadow></value><value name="subtitle"><shadow type="text" id="6UsTbeA#cn^A;7S-O7K6"><field name="TEXT"></field></shadow><block type="text_join" id="VRO;R+7ShB4`hWgF1|,N"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="Ka]p3T}w8WvY!rS#oJYh"><field name="TEXT">Kills: </field></shadow></value><value name="ADD1"><shadow type="text" id="CGA:T=^8h{W]Nv[.8JBt"><field name="TEXT"></field></shadow><block type="text_join" id="!4Z9{*2vS)o*pwBaI~B*"><mutation items="1"></mutation><value name="ADD0"><shadow type="text" id="1B]#++Ms=J(kChHlKVV`"><field name="TEXT"></field></shadow><block type="text_join" id="$wCy%~k3(2~ku!cYcorw"><mutation items="1"></mutation><value name="ADD0"><shadow type="text" id="]cITo(Zba-$;UEs@y.P?"><field name="TEXT"></field></shadow><block type="text_join" id="%bA1L%/LArW2:nJxgOkW"><mutation items="1"></mutation><value name="ADD0"><shadow type="text" id="TP]S;,DZqNn!W,*~47I-"><field name="TEXT"></field></shadow><block type="variables_get" id="ODoq`xDv+=;9g+5}#]BW"><field name="VAR" id="#?!=ZDqWN+rjXMW=/b=u">kills</field></block></value></block></value></block></value></block></value></block></value><next><block type="gameOver" id="L).w_7Bp[{:r`+``hx|t"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><field name="effect">effects.confetti</field><value name="win"><shadow type="toggleWinLose" id="X6xBXN-$O6[^{dX4OR!Q"><field name="win">true</field></shadow></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="}~RCa5mj2-fin$N|0)Y)" x="4316" y="2489"><mutation name="habilidad_municion" functionid="_O5Rc)u3elWScVbQSWw7"></mutation><field name="function_name">habilidad_municion</field><statement name="STACK"><block type="variables_change" id="}pf5v}sv[/_u12fmhWd_"><field name="VAR" id="/E%xDuwW^;j?nPZ_MpCP">municion_actual</field><value name="VALUE"><shadow type="math_number" id=",,Pg!k@@FlxUr|]T8j1Q"><field name="NUM">50</field></shadow></value><next><block type="gameSplash" id="Sa0Z(}+=qrdtuu?lk=//"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="title"><shadow type="text" id="i}nONrOTrRK*(oOzcWT["><field name="TEXT">NPC Munición</field></shadow></value><value name="subtitle"><shadow type="text" id="ubYR2ZNrxm@m,7NW8~}3"><field name="TEXT">+50 balas</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="1bI[L416WHtIE59DGHgV" x="4777" y="2489"><mutation name="habilidad_velocidad" functionid="B^W;N_baFvRldi-,_l:w"></mutation><field name="function_name">habilidad_velocidad</field><statement name="STACK"><block type="game_control_sprite" id="|~yv?v{;tP?T2}F}34uY"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="2" _input_init="true"></mutation><comment pinned="false" h="80" w="160">Modifica la velocidad base del controlador de movimiento</comment><value name="sprite"><block type="variables_get" id="GA/~!?)F9^_%uh+L]4V/"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="y3N}pJJ-i0o}/Hx/+Db."><field name="speed">150</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id=".{@Y((Fz_EwwkuoK1*{g"><field name="speed">150</field></shadow></value><next><block type="gameSplash" id=".Ji~B]BA?@t[b_rx^E8q"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="title"><shadow type="text" id="61eNW0_kuPhwpb7Ja{AZ"><field name="TEXT">NPC Corredor</field></shadow></value><value name="subtitle"><shadow type="text" id="ZnnA]P1IaETfekt8D~-X"><field name="TEXT">Velocidad aumentada!</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="@p]qIgR|4^/]H=u`3Sp%" x="5387" y="2489"><mutation name="Abrir_Cofre" functionid="I:$j^lk-~md@6%Se?E,C"></mutation><field name="function_name">Abrir_Cofre</field><statement name="STACK"><block type="variables_set" id="8,|XV=;;!MmP8I%^/Gd1"><field name="VAR" id="=A`q5,LhXWY#P^APrKs%">ubicacion</field><comment pinned="false" h="80" w="160">Lógica de detección de tiles adyacentes.
Comprueba si hay un cofre cerrado en la dirección a la que mira el jugador.
Si lo encuentra, reemplaza el tile por uno abierto y otorga recompensa.</comment><value name="VALUE"><shadow type="math_number" id="45i1B,`+YkgmIy4cS4V5"><field name="NUM">0</field></shadow><block type="tiles_location_of_sprite" id="B+vFdK5~gg-c_c(9e#5p"><value name="this"><block type="variables_get" id="}k|lF{Q[VN@?Mhl{QBr%"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value></block></value><next><block type="variables_set" id="qXv7MFyv5|BbU6}b^Q|N"><field name="VAR" id="JfoK+L#{=4a,M_Uu(pJX">col</field><value name="VALUE"><shadow type="math_number" id="#uB`)2IYp]xl0Dw{Nmhb"><field name="NUM">0</field></shadow><block type="tiles.Location_blockCombine_get" id="dwFA{7bc_$ea!Z^m}q[X"><field name="property">tiles.Location.column</field><value name="location"><block type="variables_get" id="4@CD-u]dT,)i;9ECD=`z"><field name="VAR" id="=A`q5,LhXWY#P^APrKs%">ubicacion</field></block></value></block></value><next><block type="variables_set" id="7e~0PaoW`|s9eT6!%N#7"><field name="VAR" id="SZwP~P.Z+ADp2l)Kr5?T">fila</field><value name="VALUE"><shadow type="math_number" id="Ay;$|p4B_5#G$az8D`Q3"><field name="NUM">0</field></shadow><block type="tiles.Location_blockCombine_get" id="[Az(BO}z@F:t__Wm#P0x"><field name="property">tiles.Location.row</field><value name="location"><block type="variables_get" id="6LL.Y,?B[%.9(m*-Y`=^"><field name="VAR" id="=A`q5,LhXWY#P^APrKs%">ubicacion</field></block></value></block></value><next><block type="variables_set" id="PeFWh{fh^uYE6,8*1.T;"><field name="VAR" id="LUIL5(.}jZ~vnqtCCSff">techo</field><value name="VALUE"><shadow type="math_number" id="L])?oR](eT1~(+HK9glr"><field name="NUM">0</field></shadow><block type="logic_operation" id="E]BjF*UIj})6)_CXI{Sv"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="[E~gf4X1#d3s8Y]l;d96"><field name="BOOL">TRUE</field></shadow><block type="spritetileat" id="JFNp#N=xZE9_IT9`n_KJ"><field name="direction">TileDirection.Top</field><value name="this"><block type="variables_get" id="mBPQx_VJms}Y3#p=c+/1"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="tile"><shadow type="tileset_tile_picker" id="4hl;dyxF[kz6O-qPcO!I"><field name="tile">assets.tile`cofre_abajo`</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="pn=-,d$~2h4#6,C]/wYI"><field name="BOOL">TRUE</field></shadow><block type="spritetileat" id="bD*;Vb00rMjmyo-t/i._"><field name="direction">TileDirection.Top</field><value name="this"><block type="variables_get" id="iWGwv%N`fEcbgW;wt8NH"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="tile"><shadow type="tileset_tile_picker" id="UwJRe1$~+Ie0-kY1+;MS"><field name="tile">assets.tile`myTile23`</field></shadow></value></block></value></block></value><next><block type="variables_set" id="ZDfws;Cc523)Yib,$l@o"><field name="VAR" id="i^?Y7SVg)|9W/[{iJ[C{">suelo</field><value name="VALUE"><shadow type="math_number" id="6Zgq{I8cy5e{xGcO-Qgz"><field name="NUM">0</field></shadow><block type="logic_operation" id="N|/sa6GA7wL93r#8iiX="><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="UpcG3Jxu-C=FBkjlfrl)"><field name="BOOL">TRUE</field></shadow><block type="spritetileat" id="bJ#0/f|GwdiVW;%Gfbb1"><field name="direction">TileDirection.Bottom</field><value name="this"><block type="variables_get" id="6|aH}!.8#-_],Gvy8=-d"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="tile"><shadow type="tileset_tile_picker" id="EI]_R:%yY^dJ`[M@[6ak"><field name="tile">assets.tile`cofre_abajo`</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="sA9kv93;MEBz|LXh$b=("><field name="BOOL">TRUE</field></shadow><block type="spritetileat" id="O+y4g_]v:}J_5K,#2U-2"><field name="direction">TileDirection.Bottom</field><value name="this"><block type="variables_get" id="%gadE@-l,Nu8GMS!oco3"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="tile"><shadow type="tileset_tile_picker" id="6,ewV[fIYYyMv-O8dnw|"><field name="tile">assets.tile`myTile23`</field></shadow></value></block></value></block></value><next><block type="variables_set" id="L;B{(xj(l6IQukf2tt;E"><field name="VAR" id="B/^tz[aLM[QZi=_Yg]Y:">izq</field><value name="VALUE"><shadow type="math_number" id="K4:,T!W9V3/^9S%8Ze-j"><field name="NUM">0</field></shadow><block type="logic_operation" id="o60$2d0WW))N@?Y]M(5="><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="7bs2x;tp[O=fV)!BlW*U"><field name="BOOL">TRUE</field></shadow><block type="spritetileat" id="kPllax.*hGANIMWFgKO:"><field name="direction">TileDirection.Left</field><value name="this"><block type="variables_get" id="[xS~m8(pfi4h{`45Q]vU"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="tile"><shadow type="tileset_tile_picker" id="W8@b8X$Mn5a*6_P9[3oF"><field name="tile">assets.tile`cofre_abajo`</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="VQ,R)PfM9MYUK21JLnTE"><field name="BOOL">TRUE</field></shadow><block type="spritetileat" id="Z.NlRKt$u@zxTVCCu_t("><field name="direction">TileDirection.Left</field><value name="this"><block type="variables_get" id="m#p^])qSysc~xn2j#=)U"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="tile"><shadow type="tileset_tile_picker" id="}s/+^r{M^ih25rg33X{~"><field name="tile">assets.tile`myTile23`</field></shadow></value></block></value></block></value><next><block type="variables_set" id="Jp11/%z!r.zMe,b2:$?R"><field name="VAR" id="H`QSW2-2L~{kr8Sp]=P7">der</field><value name="VALUE"><shadow type="math_number" id="ON0+/{+tfITx7ewl|NV{"><field name="NUM">0</field></shadow><block type="logic_operation" id="Gjie/~EC9ic~t1s$dpyU"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="B4_4~7uH~-sSBK%1_h@,"><field name="BOOL">TRUE</field></shadow><block type="spritetileat" id="B2mL=/Avk4;MfjbSDC.}"><field name="direction">TileDirection.Right</field><value name="this"><block type="variables_get" id="oE}UuC@`wo$;_x3yb,RB"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="tile"><shadow type="tileset_tile_picker" id="e!~NcH7s(rR(}Z(7s9}l"><field name="tile">assets.tile`cofre_abajo`</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="dswl)0Ajpjx+bOu@wt6c"><field name="BOOL">TRUE</field></shadow><block type="spritetileat" id="i%L[e*nB6XkcP7X~k4F-"><field name="direction">TileDirection.Right</field><value name="this"><block type="variables_get" id="|L//0wa.CJ.)qFS80~,S"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="tile"><shadow type="tileset_tile_picker" id="HnWghgLQ5%{JcDWpC1{^"><field name="tile">assets.tile`myTile23`</field></shadow></value></block></value></block></value><next><block type="controls_if" id=",~XJMqwVW:@wI[^z{A%="><mutation elseif="3"></mutation><value name="IF0"><shadow type="logic_boolean" id="(za1U7JW72e0W-XX$T12"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="M`(:zl^]a)k/vvV)wGy#"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="r/rxA{g2AfWmpl|pg~^#"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="I7]C2F`2mk[G5LfnGReQ"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="MkkN6i|~/G!QC5skGs~w"><field name="NUM">0</field></shadow><block type="variables_get" id="qjq?UKEFEKyyH=G#oQ3|"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field></block></value><value name="B"><shadow type="math_number" id="5@YmYDveHzoRz4xrjEm}"><field name="NUM">0</field></shadow><block type="text" id="]5~)!f-!j*=I)_(s,aQG"><field name="TEXT">arriba</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="UW?pYFSLKKfWaxp?Ztuo"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="r!e~^UuUJ],5{u]p-J}Q"><field name="VAR" id="LUIL5(.}jZ~vnqtCCSff">techo</field></block></value></block></value><statement name="DO0"><block type="mapsettileat" id="qiq1lo9$RF;Sa#qK7TMh"><value name="tile"><shadow type="tileset_tile_picker" id="Y[R7n-K%e%MI)brq$`c2"><field name="tile">assets.tile`cofre_arriba`</field></shadow></value><value name="loc"><shadow type="mapgettile" id="mouSyv!s,JM1+uR;JSQA"></shadow><block type="mapgettile" id="cT4Tsz2BAP$mr#xE/]te"><value name="col"><block type="variables_get" id="?B3}VU}-]Jbs%r9|4p`c"><field name="VAR" id="JfoK+L#{=4a,M_Uu(pJX">col</field></block></value><value name="row"><block type="math_arithmetic" id="Mr+y9O^AhbG#w)+$?@q]"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="YCt|wh:f68qs;D8-spBk"><field name="NUM">0</field></shadow><block type="variables_get" id="|i,hK2n=XSUO.#H!+jNY"><field name="VAR" id="SZwP~P.Z+ADp2l)Kr5?T">fila</field></block></value><value name="B"><shadow type="math_number" id="?9H32jk[QUZmn5LX9KIg"><field name="NUM">1</field></shadow></value></block></value></block></value><next><block type="variables_set" id="_+7t286*W`q8}Ns=lrf{"><field name="VAR" id="/X`X=t5iw$!w1+9A{b=3">cofre_abierto</field><value name="VALUE"><shadow type="math_number" id="`%x+a;iuv?05@]I1xEBY"><field name="NUM">0</field></shadow><block type="logic_boolean" id="w/Eb.+pNO`aZY@88*/DS"><field name="BOOL">TRUE</field></block></value></block></next></block></statement><value name="IF1"><shadow type="logic_boolean" id="YSI51}9fa,4Q8@;]q%JP"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="P#9R-xo9`Go%~~EGYmgx"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id=";oaE?omDm%R8t?-[_joz"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="/r3C9WrgFd8L2ZB3QyF5"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="oU,1}/=Iq.e!u/0o*q3Y"><field name="NUM">0</field></shadow><block type="variables_get" id="g}-jou?yBRvF=gf48P7/"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field></block></value><value name="B"><shadow type="math_number" id="9xtZj`I/rZqv4ssvpKoc"><field name="NUM">0</field></shadow><block type="text" id="c%ytkh7PC8L6$8EvwK+%"><field name="TEXT">abajo</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="$q.s*L1oV-VF}P8==qKf"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="VEJrGV}3q!$hQ2+NnmOm"><field name="VAR" id="i^?Y7SVg)|9W/[{iJ[C{">suelo</field></block></value></block></value><statement name="DO1"><block type="mapsettileat" id="$ATIK3Fi`h+-3t#3H%w,"><value name="tile"><shadow type="tileset_tile_picker" id="@jpk+{smUyQiAebbon|X"><field name="tile">assets.tile`cofre_arriba`</field></shadow></value><value name="loc"><shadow type="mapgettile" id="o1yxMXLAzlkWV]`[{{Fj"></shadow><block type="mapgettile" id="I:jsBWdR=g^ivYTT%7s+"><value name="col"><block type="variables_get" id="u#U!bWW6A*.29v!2k[lc"><field name="VAR" id="JfoK+L#{=4a,M_Uu(pJX">col</field></block></value><value name="row"><block type="math_arithmetic" id="=VlqL%:-w9r7Ov7Xn)SL"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="JPP4_6sPny]@;A%.%VBS"><field name="NUM">0</field></shadow><block type="variables_get" id="04f[?)G*izG;xpT],E,L"><field name="VAR" id="SZwP~P.Z+ADp2l)Kr5?T">fila</field></block></value><value name="B"><shadow type="math_number" id="[dD[fZk[,LLE~ZLn0nVs"><field name="NUM">1</field></shadow></value></block></value></block></value><next><block type="variables_set" id="W7Z+IUNO1@w$N+n44eXH"><field name="VAR" id="/X`X=t5iw$!w1+9A{b=3">cofre_abierto</field><value name="VALUE"><shadow type="math_number" id="6*=X(=QZLq+q2;#Vk3/Q"><field name="NUM">0</field></shadow><block type="logic_boolean" id="gW.C=ELj1lEU~Xt2gtV3"><field name="BOOL">TRUE</field></block></value></block></next></block></statement><value name="IF2"><shadow type="logic_boolean" id="FWvPigN%=pgp_F|)?)g!"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="%i4dy^_t@bED2@500+f~"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="(6}/Ddyg_n1!2L~,w,e8"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="BovoZiUaoP~x7GBVvVpD"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="7/[r?2-LgBt_j`@:D:@h"><field name="NUM">0</field></shadow><block type="variables_get" id="ksH~4zaQ9yj7(wPWIw_z"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field></block></value><value name="B"><shadow type="math_number" id="(eU8*I6_`A(@k+Y@Tw]@"><field name="NUM">0</field></shadow><block type="text" id="6RFLdZ!VBHs/XncWxLDX"><field name="TEXT">izquierda</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="gf[J@GS78!]}f=ZP+jdr"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="T/K|Y1`W^r2{T4:-W%A~"><field name="VAR" id="B/^tz[aLM[QZi=_Yg]Y:">izq</field></block></value></block></value><statement name="DO2"><block type="mapsettileat" id="N-7UStvSxH$;6jVVeTv^"><value name="tile"><shadow type="tileset_tile_picker" id="sH~L:?pOBMzp`7f5fr;m"><field name="tile">assets.tile`cofre_arriba`</field></shadow></value><value name="loc"><shadow type="mapgettile" id="DOt@`lhF!sDtOL;{[XeE"></shadow><block type="mapgettile" id="gTs,iiNDd=j/g=$W=-{s"><value name="col"><block type="math_arithmetic" id="i+$#y@T1Hq?TOgUwJO%}"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="Ij^N2zTf_Cl$+Dh~/PwZ"><field name="NUM">0</field></shadow><block type="variables_get" id="0Xq}=H1=^CPt_YxCXAqK"><field name="VAR" id="JfoK+L#{=4a,M_Uu(pJX">col</field></block></value><value name="B"><shadow type="math_number" id="qJ_[Kx4Qc?($n:Ed2:#-"><field name="NUM">1</field></shadow></value></block></value><value name="row"><block type="variables_get" id="BnT/U}VdBn#$dNjxL~1!"><field name="VAR" id="SZwP~P.Z+ADp2l)Kr5?T">fila</field></block></value></block></value><next><block type="variables_set" id="6qDbo*m5+Pf-23giJqK#"><field name="VAR" id="/X`X=t5iw$!w1+9A{b=3">cofre_abierto</field><value name="VALUE"><shadow type="math_number" id="}XI8@kC[lV2A;NK#J|Ny"><field name="NUM">0</field></shadow><block type="logic_boolean" id="a(Jni_x19lb%^LF,Liyv"><field name="BOOL">TRUE</field></block></value></block></next></block></statement><value name="IF3"><shadow type="logic_boolean" id="%+Cr!8#*2-f^vfCLR18z"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="CugZ-gr(KugAm3c;iq=h"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="B{64OAFJXF4iX_77uh8*"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="9T-rzb6@a_EYIw*?U,~9"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="`CInRT3_aX-rGj*.{GpH"><field name="NUM">0</field></shadow><block type="variables_get" id="==fCRJhc4SP3~lw@Q87V"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field></block></value><value name="B"><shadow type="math_number" id="K-,/}C!IUBWhH/zLLW{a"><field name="NUM">0</field></shadow><block type="text" id="S5%?tP0ds(f0A[z`{m,q"><field name="TEXT">derecha</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="$O*4?M~omMI|vArdZ]{Z"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="^K89JBV~_}[Ri%*~e5Sw"><field name="VAR" id="H`QSW2-2L~{kr8Sp]=P7">der</field></block></value></block></value><statement name="DO3"><block type="mapsettileat" id="*])n;8[IV9R9$7yY?1@t"><value name="tile"><shadow type="tileset_tile_picker" id="wPgV(Eq#A6LD.3Xn}NAo"><field name="tile">assets.tile`cofre_arriba`</field></shadow></value><value name="loc"><shadow type="mapgettile" id="Y@|ME?f9]3RJ[mG{rGdc"></shadow><block type="mapgettile" id="D)ps;GXP%dKZ)(gitkZH"><value name="col"><block type="math_arithmetic" id="f[dJZxG)TX9.f_5CGW=;"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="4{[k%7ib$!p!l1S2n/)d"><field name="NUM">0</field></shadow><block type="variables_get" id="]OK9Y4r^H;qOu*l2ft[B"><field name="VAR" id="JfoK+L#{=4a,M_Uu(pJX">col</field></block></value><value name="B"><shadow type="math_number" id="v,lQcZ|B!}4cw_|904^:"><field name="NUM">1</field></shadow></value></block></value><value name="row"><block type="variables_get" id="#@aHIgP%B9!W_0[{=@Oa"><field name="VAR" id="SZwP~P.Z+ADp2l)Kr5?T">fila</field></block></value></block></value><next><block type="variables_set" id="W)44x%a2@Jw8~%qslQqk"><field name="VAR" id="/X`X=t5iw$!w1+9A{b=3">cofre_abierto</field><value name="VALUE"><shadow type="math_number" id="Xh(pGOB8`Lu]Wk3|[Uvx"><field name="NUM">0</field></shadow><block type="logic_boolean" id="@_jFFH80Wgf@77uJIxn="><field name="BOOL">TRUE</field></block></value></block></next></block></statement><next><block type="controls_if" id="ysQB|p?KbYkHHosM+VkN"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="}~B3PB3V2+)km!PYj~T7"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="N0sN;P{,5a89o6mx}-o."><field name="VAR" id="/X`X=t5iw$!w1+9A{b=3">cofre_abierto</field></block></value><statement name="DO0"><block type="variables_change" id="LO/$L6P+-`[Q:aCSln{J"><field name="VAR" id="/E%xDuwW^;j?nPZ_MpCP">municion_actual</field><value name="VALUE"><shadow type="math_number" id="@`U)[FKGv@-oqy[O;+XD"><field name="NUM">10</field></shadow></value><next><block type="gameSplash" id="~[]:N%yK9l.3_QlAhj}k"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="title"><shadow type="text" id="x*${T-E9M8yA;KR%pDOD"><field name="TEXT">Cofre abierto!</field></shadow></value><value name="subtitle"><shadow type="text" id="e!}^A+BYsbT;wDafuI5)"><field name="TEXT">+10 municion</field></shadow></value><next><block type="variables_set" id="{,_VfPCoY~,2HO@B#QG9"><field name="VAR" id="/X`X=t5iw$!w1+9A{b=3">cofre_abierto</field><value name="VALUE"><shadow type="math_number" id="0B7%0,xt+,fhRIh+WhSc"><field name="NUM">0</field></shadow><block type="logic_boolean" id="bsIH=lO-t~MfBYpj}2?s"><field name="BOOL">FALSE</field></block></value></block></next></block></next></block></statement><statement name="ELSE"><block type="gameSplash" id="r!Z3x|^w]W6GiHyEWJwR"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><value name="title"><shadow type="text" id="mF]|Re,waQ]%b;7/6}yb"><field name="TEXT">No hay cofre</field></shadow></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="Cno)X4^_a3H~CA,jhEK#" x="6811" y="2489"><mutation name="crear_npcs_especiales" functionid="7*ke00vA95Q?Or3tXrdI"></mutation><field name="function_name">crear_npcs_especiales</field><statement name="STACK"><block type="variables_set" id="a~=mgxy7jx~$B1Q.i+8S"><field name="VAR" id="tszq4J=h:G]dtjl-weWY">npc1</field><comment pinned="false" h="80" w="160">Instancia los NPCs de habilidades en coordenadas fijas del mapa
ZONA 1 – CURANDERO</comment><value name="VALUE"><shadow type="math_number" id="6?0FC3[y^SxDX,VW~+7!"><field name="NUM">0</field></shadow><block type="spritescreate" id="-_f-|jZok%kP-|YM^k:h"><value name="img"><shadow type="screen_image_picker" id="S0T66{TFE^K{QCF](y0Q"><field name="img">assets.image`npc_healer`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image21"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id=":6M6Jb~ex3Z@e0{]x8/C"><field name="MEMBER">Player</field></shadow><block type="typescript_expression" id="s(m#?syQ^8HlU(d$-~r{"><field name="EXPRESSION">SpriteKind.NPC1</field></block></value></block></value><next><block type="mapplaceontile" id="dQ%QD9i-CRaFfVC.}Qjn"><value name="sprite"><block type="variables_get" id="dL?viHKO]Jfl$]h?%Cg%"><field name="VAR" id="tszq4J=h:G]dtjl-weWY">npc1</field></block></value><value name="loc"><shadow type="mapgettile" id=".M=bMZ#-1@nlt%?PbmFg"><value name="col"><shadow type="math_number" id="?sW#DH0]Tcr3{|/Qr0RU"><field name="NUM">29</field></shadow></value><value name="row"><shadow type="math_number" id=")DCytC}HgtNyiGR9x6zy"><field name="NUM">35</field></shadow></value></shadow></value><next><block type="variables_set" id="~Zy1?kX?Wg8a(GZO-O6A"><field name="VAR" id="QPBlh+s%EU{/LLgTLow}">npc2</field><comment pinned="false" h="80" w="160">ZONA 2 – VELOCIDAD</comment><value name="VALUE"><shadow type="math_number" id="zCFk^{p:jalAJ-Q5C[4B"><field name="NUM">0</field></shadow><block type="spritescreate" id="q@YBR4b;0EyP2c[N0l}e"><value name="img"><shadow type="screen_image_picker" id="1$U7S`BN7wVkJk0w5x@Y"><field name="img">assets.image`npc_runner`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image20"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id="U`CA$;kNzg58kV{e.~e_"><field name="MEMBER">Player</field></shadow><block type="typescript_expression" id="H:p73Rt-kD2.T,P(W?%."><field name="EXPRESSION">SpriteKind.NPC2</field></block></value></block></value><next><block type="mapplaceontile" id="DT*|Mex7I{i#?QiRjnj8"><value name="sprite"><block type="variables_get" id="!KMfaa1~B!7eFV%Uoe$d"><field name="VAR" id="QPBlh+s%EU{/LLgTLow}">npc2</field></block></value><value name="loc"><shadow type="mapgettile" id="0fjDsoJ~{`w9D]O9v19X"><value name="col"><shadow type="math_number" id=".sArr!,hzoX3ikZQc76R"><field name="NUM">84</field></shadow></value><value name="row"><shadow type="math_number" id="GCU%F0zB5uepAnhYG*,K"><field name="NUM">92</field></shadow></value></shadow></value><next><block type="variables_set" id="GU1rTgRJH+%|s8cK2d2,"><field name="VAR" id="8~/^(r0(MjVJ(2ZyIUz$">npc3</field><comment pinned="false" h="80" w="160">ZONA 3 – MUNICIÓN</comment><value name="VALUE"><shadow type="math_number" id="11E,|a53uV]$-3N|L_C~"><field name="NUM">0</field></shadow><block type="spritescreate" id="|t:3pVMHs!41B[C5U-vF"><value name="img"><shadow type="screen_image_picker" id="7*ZY-|C*R@?rzSC%f;3R"><field name="img">assets.image`npc_ammo`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image16"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id="AliMKQHGU_x9E0q%Sln~"><field name="MEMBER">Player</field></shadow><block type="typescript_expression" id="DOnH_ba%hSsLQ|0C=O9n"><field name="EXPRESSION">SpriteKind.NPC3</field></block></value></block></value><next><block type="mapplaceontile" id="mgDM4(c7sRFSPUTOm(s;"><value name="sprite"><block type="variables_get" id="T,UX+W3UtBIY`Pd)zN_c"><field name="VAR" id="8~/^(r0(MjVJ(2ZyIUz$">npc3</field></block></value><value name="loc"><shadow type="mapgettile" id=",%oYX7oS3x+B}}~UJ+PM"><value name="col"><shadow type="math_number" id="+ozT3/KjUg1sS60b`J3Z"><field name="NUM">65</field></shadow></value><value name="row"><shadow type="math_number" id="(ZAvR(5L/czoj.eG;Xqf"><field name="NUM">21</field></shadow></value></shadow></value><next><block type="variables_set" id="V34[O-M.E]7+cvtz-}hc"><field name="VAR" id="cb;Z%6EK8-%45Ae4Bmj9">npc4</field><comment pinned="false" h="80" w="160">ZONA 4 – ESCUDO</comment><value name="VALUE"><shadow type="math_number" id="V/3v?1{F{vA#0iPNsi`."><field name="NUM">0</field></shadow><block type="spritescreate" id="G,j0T*(;Q,xU{ozC%5Sa"><value name="img"><shadow type="screen_image_picker" id="MPMF%mi}K^uS0+X+s6)O"><field name="img">assets.image`npc_shield`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image22"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id="AKrbIeRIiA[5~C5~%lqK"><field name="MEMBER">Player</field></shadow><block type="typescript_expression" id="A[MA8}?r;lu),l5vN^%L"><field name="EXPRESSION">SpriteKind.NPC4</field></block></value></block></value><next><block type="mapplaceontile" id="(-,8$~UMtUsX4hCj{O81"><value name="sprite"><block type="variables_get" id="@RaGb51cPm!t!_aCndPL"><field name="VAR" id="cb;Z%6EK8-%45Ae4Bmj9">npc4</field></block></value><value name="loc"><shadow type="mapgettile" id="5dxs!mom(eOAJX~t}k.v"><value name="col"><shadow type="math_number" id="U@9o,n{2$(x%ng,jDQq{"><field name="NUM">99</field></shadow></value><value name="row"><shadow type="math_number" id="ek/edgCW,j;l()mV]Y{I"><field name="NUM">10</field></shadow></value></shadow></value><next><block type="variables_set" id="6:.E+SyITW)ujRw+lDAj"><field name="VAR" id="KMEQPDn*+!,81VpSiems">npc5</field><comment pinned="false" h="80" w="160">ZONA 5 – DOBLE DISPARO</comment><value name="VALUE"><shadow type="math_number" id="Sd*3uPv2J9SJ18igDpqE"><field name="NUM">0</field></shadow><block type="spritescreate" id="iO$aSoJT(=GW_5/a]J_W"><value name="img"><shadow type="screen_image_picker" id="}Nz_wk$uPau/C.|9=0V6"><field name="img">assets.image`npc_fire`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image19"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id="+XFSL(.@]jgv8#C42md`"><field name="MEMBER">Player</field></shadow><block type="typescript_expression" id="K8g@iN6ES}NiQ$l_P1B$"><field name="EXPRESSION">SpriteKind.NPC5</field></block></value></block></value><next><block type="mapplaceontile" id="E^Qek5j{m(aOdN_3U;y;"><value name="sprite"><block type="variables_get" id="%/-j.Jty$Myg=jy_#4KP"><field name="VAR" id="KMEQPDn*+!,81VpSiems">npc5</field></block></value><value name="loc"><shadow type="mapgettile" id="=a;Z6jU`{*_#Y%q_FN%5"><value name="col"><shadow type="math_number" id="aBsZ89nhYAFE}wVtlrIa"><field name="NUM">46</field></shadow></value><value name="row"><shadow type="math_number" id=".j(Hd[:cR1heG-^0)f?f"><field name="NUM">102</field></shadow></value></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="oH)WfJXy!ivopgp(1(_)" x="20" y="4170"><mutation name="habilidad_curacion" functionid="A}WP7n!6bA]dBi7;)O$["></mutation><field name="function_name">habilidad_curacion</field><statement name="STACK"><block type="hudChangeLifeBy" id="KdLIrRq4x6~rEpW)N}R$"><value name="value"><shadow type="math_number" id="9ykyDaOWz!EUWu+?w=NJ"><field name="NUM">20</field></shadow></value><next><block type="gameSplash" id="7twr1,VTJ~C6YlsLP:NE"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="title"><shadow type="text" id="B*n[u.xj6o9Vs]?3vPT]"><field name="TEXT">NPC Curandero</field></shadow></value><value name="subtitle"><shadow type="text" id="yi!Fh/T4l(2!-)-A{1+)"><field name="TEXT">+20 vida</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="(=0;o/auJY.U%PG;B[9i" x="480" y="4170"><mutation name="habilidad_escudo" functionid="bC*/OS6b*khH0e`*ZgEV"></mutation><field name="function_name">habilidad_escudo</field><statement name="STACK"><block type="variables_set" id="FNOf%,Lb9)ADS0H/wqQE"><field name="VAR" id="d[hYvbV%QFtNzV`?vt=h">tiene_escudo</field><comment pinned="false" h="80" w="160">Activa el estado de invulnerabilidad para el siguiente golpe recibido</comment><value name="VALUE"><shadow type="math_number" id="#{di||O[|(`|,|JdB,HR"><field name="NUM">0</field></shadow><block type="logic_boolean" id="z$Rr*DjSp!w-?BNxmm`0"><field name="BOOL">TRUE</field></block></value><next><block type="gameSplash" id=".+UU?KFl=hlAvTtY11}`"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="title"><shadow type="text" id="$c:-5PH:p7vN*CDc1nK@"><field name="TEXT">NPC Escudo</field></shadow></value><value name="subtitle"><shadow type="text" id="%XaG(JuDAsZnK)_RUJ@B"><field name="TEXT">¡Resistes 1 golpe sin daño!</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="dp+M_[+2C[EZ3hpwj)pu" x="1094" y="4170"><mutation name="habilidad_fire_rate" functionid="((wa7RWcS7`3IDo^j@=1"></mutation><field name="function_name">habilidad_fire_rate</field><statement name="STACK"><block type="variables_set" id="xjnfrrA*[`2RpmHwh`X="><field name="VAR" id="n6c7Sc$xV*xGfp@Eaa@M">fire_rate_boost</field><value name="VALUE"><shadow type="math_number" id="h.*%14azISny-axm`R/^"><field name="NUM">0</field></shadow><block type="logic_boolean" id="BLL0`j7V9WY]}8Q/U-li"><field name="BOOL">TRUE</field></block></value><next><block type="gameSplash" id="{rhG/[B1tkn9EIZ]-?s*"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="title"><shadow type="text" id="N*#Vb#w^vi2I,]HI}L!}"><field name="TEXT">NPC Maestro del disparo</field></shadow></value><value name="subtitle"><shadow type="text" id="fLg/P=It=w0Z|iis]36T"><field name="TEXT">¡Disparo doble por 10s!</field></shadow></value><next><block type="device_pause" id="gL(INvl-DuBCm[F?(TxB"><value name="pause"><shadow type="timePicker" id="5);|3}Duv3y]wF)pQ%7y"><field name="ms">10000</field></shadow></value><next><block type="variables_set" id="-ijr,B_rj-nrFS.`XooG"><field name="VAR" id="n6c7Sc$xV*xGfp@Eaa@M">fire_rate_boost</field><value name="VALUE"><shadow type="math_number" id="))3!3m#.LxWj0S`cC:Th"><field name="NUM">0</field></shadow><block type="logic_boolean" id="/rt+H*zL4p80x6zh+bC{"><field name="BOOL">FALSE</field></block></value></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="`n?+*=-uDm4QD;L)F#J+" x="1794" y="4170"><mutation name="activar_npc" functionid="Ej:Nf?D^a5i;P;e~oI6T"><arg name="sprite" id="om7xosy8y5vpfyfdois8" type="Sprite"></arg><arg name="npc" id="s12cn5s0si62fdrwclfp" type="Sprite"></arg></mutation><field name="function_name">activar_npc</field><value name="om7xosy8y5vpfyfdois8"><block type="argument_reporter_custom" id="k0Wgj5Zp]_d01lem8N)q"><mutation duplicateondrag="true" typename="Sprite"></mutation><field name="VALUE">sprite</field></block></value><value name="s12cn5s0si62fdrwclfp"><block type="argument_reporter_custom" id="CZ]?4@xMIA$DKkX,rFi#"><mutation duplicateondrag="true" typename="Sprite"></mutation><field name="VALUE">npc</field></block></value><statement name="STACK"><block type="variables_set" id="w,0zgE;q{,av0.#q8}DQ"><field name="VAR" id="ZbXT_=_Bo64dCuC0lp1$">tipo</field><comment pinned="false" h="80" w="160">Router de colisiones con NPCs aliados.
Identifica el tipo de NPC y ejecuta la función de mejora correspondiente.</comment><value name="VALUE"><shadow type="math_number" id="f[Z6be2s6o%L!#y/K2%d"><field name="NUM">0</field></shadow><block type="spritegetkind" id=")O3/7^rS4X#{7AAK|#Cz"><value name="sprite"><block type="argument_reporter_custom" id="D91B~gMxkVjfJ]:QeQl["><mutation typename="Sprite"></mutation><field name="VALUE">npc</field></block></value></block></value><next><block type="controls_if" id="]14L$.7^#c)0Fm7!XcH{"><mutation elseif="4"></mutation><value name="IF0"><shadow type="logic_boolean" id="3,]Hx(w8d;25FmXRKRGG"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="TH7nC$o]9XS]}wK~lx%*"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="k1rMVz!hKOew.Yp_56,I"><field name="NUM">0</field></shadow><block type="variables_get" id="T]RqMF{2hGO_@hD8bd*+"><field name="VAR" id="ZbXT_=_Bo64dCuC0lp1$">tipo</field></block></value><value name="B"><shadow type="math_number" id="_+DUN;1l)D?Li0v.[k{^"><field name="NUM">0</field></shadow><block type="typescript_expression" id="@F(tSG*NUWL/ZWtnXh@~"><field name="EXPRESSION">SpriteKind.NPC1</field></block></value></block></value><statement name="DO0"><block type="function_call" id="|1sXGG!F5Aj_;~h*E,m6"><mutation name="habilidad_curacion" functionid="A}WP7n!6bA]dBi7;)O$["></mutation></block></statement><value name="IF1"><shadow type="logic_boolean" id="92)Sm5!7NIYA[Atdx?7C"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="]OqhORtj.gFlo/oIvcbt"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="2g]}NA^J|R7FA;F43o=%"><field name="NUM">0</field></shadow><block type="variables_get" id="X$LW?2F9`rqQ:C+17[|t"><field name="VAR" id="ZbXT_=_Bo64dCuC0lp1$">tipo</field></block></value><value name="B"><shadow type="math_number" id="92;rXx-CJi|f)~C~*P)p"><field name="NUM">0</field></shadow><block type="typescript_expression" id="Bre~)u.|Bzv!*88H{l!o"><field name="EXPRESSION">SpriteKind.NPC2</field></block></value></block></value><statement name="DO1"><block type="function_call" id="w/jS+e*nHExG.MQP[zVF"><mutation name="habilidad_velocidad" functionid="B^W;N_baFvRldi-,_l:w"></mutation></block></statement><value name="IF2"><shadow type="logic_boolean" id="DAQFNet0Lc*UZCQr8[/}"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="]1$z1LRuxII_A5M}Xg+2"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="%afZ^(lR`RRJJw|Zw8Sc"><field name="NUM">0</field></shadow><block type="variables_get" id="2NKceHYV/Q%[I-JcQ6dn"><field name="VAR" id="ZbXT_=_Bo64dCuC0lp1$">tipo</field></block></value><value name="B"><shadow type="math_number" id="u1IO,kWt[_0rgzAR8IuS"><field name="NUM">0</field></shadow><block type="typescript_expression" id="VV+Fu3hcS(ByF6au7+27"><field name="EXPRESSION">SpriteKind.NPC3</field></block></value></block></value><statement name="DO2"><block type="function_call" id="z*M%b?Se`ip=pRtWmHa*"><mutation name="habilidad_municion" functionid="_O5Rc)u3elWScVbQSWw7"></mutation></block></statement><value name="IF3"><shadow type="logic_boolean" id="}4b1XOt%2rkzHtR{LS5$"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="v4f`O]qV#g%psPhXi2|A"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="4Rig[NTk,#1CnY-3OPup"><field name="NUM">0</field></shadow><block type="variables_get" id=",CTNA^,LeUj-N$INLOq+"><field name="VAR" id="ZbXT_=_Bo64dCuC0lp1$">tipo</field></block></value><value name="B"><shadow type="math_number" id="62|TA%IILq#,kFc1jaWg"><field name="NUM">0</field></shadow><block type="typescript_expression" id="Jq?UWI:yhKjCii00GjP@"><field name="EXPRESSION">SpriteKind.NPC4</field></block></value></block></value><statement name="DO3"><block type="function_call" id="s3TR:OOsT_|EZ+$`:WCg"><mutation name="habilidad_escudo" functionid="bC*/OS6b*khH0e`*ZgEV"></mutation></block></statement><value name="IF4"><shadow type="logic_boolean" id="x(xlA@EBWkNQ7m-QdrJD"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="w}P4%C?f?^$*_$oce_kn"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="Q_wAkl7lDc4,kF(V?#)-"><field name="NUM">0</field></shadow><block type="variables_get" id="E0hKLF;}pDYu=$)l4-84"><field name="VAR" id="ZbXT_=_Bo64dCuC0lp1$">tipo</field></block></value><value name="B"><shadow type="math_number" id="m%Bi+uWE.AYS^nN(h4~@"><field name="NUM">0</field></shadow><block type="typescript_expression" id="CTMr+gk;0N6E?w-^[D1m"><field name="EXPRESSION">SpriteKind.NPC5</field></block></value></block></value><statement name="DO4"><block type="function_call" id=",6^/iWUEH[Xyg6=YuFnf"><mutation name="habilidad_fire_rate" functionid="((wa7RWcS7`3IDo^j@=1"></mutation></block></statement><next><block type="spritedestroy" id="bJ3`P].I^#*Nn`OAcGhs"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="2" _input_init="true"></mutation><field name="effect">effects.smiles</field><value name="sprite"><block type="argument_reporter_custom" id="FY/YhJ!m{{AmeE=AV/{_"><mutation typename="Sprite"></mutation><field name="VALUE">npc</field></block></value><value name="duration"><shadow type="timePicker" id=":G7s/HmTu+.WGox6*HvV"><field name="ms">300</field></shadow></value></block></next></block></next></block></statement></block><block type="function_definition" id="^1(,wJ`[_(N#^hbHRf!_" x="2505" y="4170"><mutation name="disparar" functionid="NG._(n4$+9Y1!x-_$[YX"></mutation><field name="function_name">disparar</field><statement name="STACK"><block type="typescript_statement" id="+,a6!27-el7_m$-YCTE/"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let proyectil: Sprite;" numlines="1" declaredvars="proyectil"></mutation><next><block type="controls_if" id="QHN,-%Q7%vvaSWPPb6Vx"><comment pinned="false" h="80" w="160">Lógica de creación de proyectiles del jugador.
Asigna velocidad vectorial basándose en la última dirección de movimiento registrada.</comment><value name="IF0"><shadow type="logic_boolean" id="SyKsrlGW$q4Gm%3Cg^8J"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="=zT3$zTg_v):v|`!g6jc"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="Tow6{-;:[p_o*S[bmon,"><field name="NUM">0</field></shadow><block type="variables_get" id="jZBQjVwroTfJi)Fj;7.H"><field name="VAR" id="/E%xDuwW^;j?nPZ_MpCP">municion_actual</field></block></value><value name="B"><shadow type="math_number" id="T|%*V4o0CKu0|h|#4jO]"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="variables_change" id="lmW230hkQRH-8YNX=2BU"><field name="VAR" id="/E%xDuwW^;j?nPZ_MpCP">municion_actual</field><value name="VALUE"><shadow type="math_number" id="Cq|N^x7ZFGB|w89kQIKz"><field name="NUM">-1</field></shadow></value><next><block type="variables_set" id="=o7O-RO:|02Sn91{GyMk"><field name="VAR" id="}8$.ANdRz0muu1oXxns]">proyectil</field><value name="VALUE"><shadow type="math_number" id="rvbzsgPnWv+EOPc=4shp"><field name="NUM">0</field></shadow><block type="spritescreateprojectilefromsprite" id="AlfAkZ?LG4BCnw^c[a_|"><value name="img"><shadow type="screen_image_picker" id="WCJQmx!*L7W:qp{8)*EH"><field name="img">assets.image`proyectil1`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image4"}}</data></shadow></value><value name="sprite"><block type="variables_get" id="BM){QDzN,)MT5ug$v*^="><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="nM%US3o~.C?y4d^=I`@S"><field name="speed">0</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id="m`ETdND/pE!6@1vy!/%R"><field name="speed">0</field></shadow></value></block></value><next><block type="controls_if" id="eNrJj12nW7P_s6Cy93Pv"><mutation elseif="3"></mutation><value name="IF0"><shadow type="logic_boolean" id="|L]rUFId_*T6NY%YaB9a"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="q%5W?Cfrf}n{Ut`*]=XF"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id=".am[EPXx!Rm5BuX`f-AL"><field name="NUM">0</field></shadow><block type="variables_get" id="Gv-losMV0YvF,RLr2lqX"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field></block></value><value name="B"><shadow type="math_number" id="e-lu6ll{yL=[.V#..Ziz"><field name="NUM">0</field></shadow><block type="text" id="CkPiI7=`da:AeE%1*oBS"><field name="TEXT">arriba</field></block></value></block></value><statement name="DO0"><block type="spritesetvel" id="P/+MRka=dqoPcd3Mdxl}"><value name="sprite"><block type="variables_get" id="VqwNub*z|iP[GxZ(TNL4"><field name="VAR" id="}8$.ANdRz0muu1oXxns]">proyectil</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="HEhD%Lwk{ZPkQyF)*+%9"><field name="speed">0</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id=":FR@UpJEhUSjA`lTft)F"><field name="speed">-150</field></shadow></value></block></statement><value name="IF1"><shadow type="logic_boolean" id="g/+4f?*s]E^JU:d3{4U5"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="s)NciB+79}!w1#kvG~ag"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="9[4PP_1pr29uwGYKMjUy"><field name="NUM">0</field></shadow><block type="variables_get" id="j_yrG*ZN|0Qw92A+s~f6"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field></block></value><value name="B"><shadow type="math_number" id="~$)@CtSp*nrg/X6Lgzd`"><field name="NUM">0</field></shadow><block type="text" id="=vnMI{Gt%VQeJcBvA{C]"><field name="TEXT">abajo</field></block></value></block></value><statement name="DO1"><block type="spritesetvel" id="=h~a`HZnx4^0d6Tl(.cZ"><value name="sprite"><block type="variables_get" id=".znQh;GAtB~n7tVoFL-G"><field name="VAR" id="}8$.ANdRz0muu1oXxns]">proyectil</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="[OM(TBnqAoLxpp3uueO("><field name="speed">0</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id="/:Wa0+:J093kim3JuBdj"><field name="speed">150</field></shadow></value></block></statement><value name="IF2"><shadow type="logic_boolean" id="w9T@3IoJkpG)k3`fRyMx"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="oUVC8y{:SKPlrc`7Pf$$"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="|hO]cEa7sRa{G`BuAX1)"><field name="NUM">0</field></shadow><block type="variables_get" id="@lc13W~n1[:Lr:obJ~8^"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field></block></value><value name="B"><shadow type="math_number" id="sV+r+Q@a?UBUmROwU^$Z"><field name="NUM">0</field></shadow><block type="text" id="Hp;Xl?7)?(A76+K9!-!5"><field name="TEXT">izquierda</field></block></value></block></value><statement name="DO2"><block type="spritesetvel" id="v^x}|+o.P?M/eR{B}~F|"><value name="sprite"><block type="variables_get" id="VX#U1Az{V03d3KH~XBcd"><field name="VAR" id="}8$.ANdRz0muu1oXxns]">proyectil</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="aZt?B7~ltj8`J2g5(PPL"><field name="speed">-150</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id="Yv*R/cf8i~F`/K|BqNAo"><field name="speed">0</field></shadow></value></block></statement><value name="IF3"><shadow type="logic_boolean" id="b(3o-9:|$KIZm8M]y[V_"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="x7dj|N+K(|@gdwr:?V~C"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id=";wOm}zBoE5Rt}k|El-O$"><field name="NUM">0</field></shadow><block type="variables_get" id=".[%22mOn3T0HAK-iWG2p"><field name="VAR" id="FW13F*Yk2TQx~)Ds3ioR">ultima_direccion</field></block></value><value name="B"><shadow type="math_number" id="WcG+y[Lt/C1/$9E@BWCb"><field name="NUM">0</field></shadow><block type="text" id="#PY]jLp7|0sk0BPm]8Ku"><field name="TEXT">derecha</field></block></value></block></value><statement name="DO3"><block type="spritesetvel" id="[U}nje]K(Y24X.-mv)Ot"><value name="sprite"><block type="variables_get" id="%c9QSr03~?yVI:YSV*%z"><field name="VAR" id="}8$.ANdRz0muu1oXxns]">proyectil</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="6~[=(hmZq5@yH/W{YWYh"><field name="speed">150</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id="]j+|gpCXnT4chv{nastf"><field name="speed">0</field></shadow></value></block></statement><next><block type="spritesetsetflag" id="ovJ(}aKH`6i[eH{6PcA0"><field name="flag">SpriteFlag.AutoDestroy</field><value name="sprite"><block type="variables_get" id="=Pj9ypXj70;6ncbZQ{xJ"><field name="VAR" id="}8$.ANdRz0muu1oXxns]">proyectil</field></block></value><value name="on"><shadow type="toggleOnOff" id="(y#kCNRCZ7rV@USbGw@,"><field name="on">true</field></shadow></value><next><block type="Sprite_blockCombine_set" id="8;OA)Or#OmJi@hL`,kP%"><field name="property">Sprite.lifespan</field><value name="mySprite"><block type="variables_get" id="zdE~ZTxl-D]*KeNvV,O}"><field name="VAR" id="}8$.ANdRz0muu1oXxns]">proyectil</field></block></value><value name="value"><shadow type="math_number" id="W?/k#!)A77ywyS-2E=Zs"><field name="NUM">2000</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block></next></block></statement></block><block type="function_definition" id="4}f_h)Ha%pug8#;~Lj|R" x="3379" y="4170"><mutation name="mostrar_menu" functionid="JF;EK9o,o^Z[QpL|mjVg"></mutation><field name="function_name">mostrar_menu</field><statement name="STACK"><block type="music_stop_all_sounds" id="`0)%QA^m7`A##pZ#28ey"><comment pinned="false" h="80" w="160">Configuración inicial de la pantalla de título (Lobby).
Crea el cursor y un botón invisible con hitbox sólida para detectar clics.</comment><next><block type="synth_set_volume" id=":1?:3NWpQh*}L$DKT2e("><value name="volume"><shadow type="math_number_minmax" id="NexCzKv*FxMAleih+/^?"><mutation min="0" max="255" precision="0"></mutation><field name="SLIDER">100</field></shadow></value><next><block type="music_playable_play" id="#Ib)!j0}k81g6#$E5C~1"><field name="playbackMode">music.PlaybackMode.LoopingInBackground</field><value name="toPlay"><shadow type="music_melody_playable" id="wU6)}6(Qo334w,p$VgnC"><field name="melody">music.baDing</field></shadow><block type="music_string_playable" id="[xP`~9w!Fmb*0uaMQSr["><value name="melody"><shadow type="melody_editor" id="isX.0o~*[tNBtgZgb0C5"><field name="melody">"E B C5 A B G A F "</field></shadow></value><value name="tempo"><shadow type="math_number_minmax" id="U-x.F0e$OgkUYe_?2,HV"><mutation min="40" max="500" precision="0"></mutation><field name="SLIDER">120</field></shadow></value></block></value><next><block type="gamesetbackgroundimage" id="Z7=(G~gCyB[/zh]Cfi{0"><value name="img"><shadow type="background_image_picker" id="L{xY)5VUr8-ioks3*FJr"><field name="img">assets.image`pantalla_inicial`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image14"}}</data></shadow></value><next><block type="variables_set" id="J5aIbN0#3T1:3pBKboFr"><field name="VAR" id="_N5OrimrUP_C0VqEmPK.">cursor</field><value name="VALUE"><shadow type="math_number" id="d^xeeK:acEkk]:w+x@:z"><field name="NUM">0</field></shadow><block type="spritescreate" id="3.|.p`!$6!``~(Rx^AvB"><value name="img"><shadow type="screen_image_picker" id="Af.X5e%(D^x!LIE%{yI)"><field name="img"></field></shadow><block type="image_create" id="PPy8F6]FtMY1U{UUbog,"><value name="width"><shadow type="math_number" id="pw+A}^og!J{*32oC}ppq"><field name="NUM">5</field></shadow></value><value name="height"><shadow type="math_number" id="kZ~@h2WaJE?n7SJM7r[w"><field name="NUM">5</field></shadow></value></block></value><value name="kind"><shadow type="spritekind" id="Zt.|W5j5Cz7#-F1D6#z?"><field name="MEMBER">Player</field></shadow><block type="typescript_expression" id="-/iV8r@@bW0!Z)a-EGys"><field name="EXPRESSION">SpriteKind.Cursor</field></block></value></block></value><next><block type="Image_fill" id="[A=/-D|i^qMfvZKi0KVj"><value name="picture"><block type="spriteimage" id="S0hN/CyX8p[cs1+hny*X"><value name="sprite"><block type="variables_get" id="Y$]tmZV^{Laq2fLwdh%g"><field name="VAR" id="_N5OrimrUP_C0VqEmPK.">cursor</field></block></value></block></value><value name="c"><shadow type="colorindexpicker" id="J`qXd$8,BLO6$@0[C.G}"><field name="index">1</field></shadow></value><next><block type="spritesetsetflag" id="1L7CI_T:=`N4--QkOv3z"><field name="flag">SpriteFlag.StayInScreen</field><value name="sprite"><block type="variables_get" id="1pxD_V@bk|KcYn=Q%H~I"><field name="VAR" id="_N5OrimrUP_C0VqEmPK.">cursor</field></block></value><value name="on"><shadow type="toggleOnOff" id="g50]dhX**/+]~lZF_faZ"><field name="on">true</field></shadow></value><next><block type="game_control_sprite" id="udeR]ZE?STSzr,O)$KRY"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="2" _input_init="true"></mutation><value name="sprite"><block type="variables_get" id="+m-.CHlP0R6YJg6#MO#T"><field name="VAR" id="_N5OrimrUP_C0VqEmPK.">cursor</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="b@na!/R+2U#j^0?CVcUG"><field name="speed">150</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id="pyq;e:8noFpeOq,HnDwh"><field name="speed">150</field></shadow></value><next><block type="variables_set" id="KQ^T~%o?O0$J!p]4L^/("><field name="VAR" id="hZnj6(@F}UqaO,6*rj9,">imagen_hitbox</field><value name="VALUE"><shadow type="math_number" id="t9CXqa~|)/(HoFy7[Hl."><field name="NUM">0</field></shadow><block type="image_create" id="cP6yzh$a~*`PeyAdvqQ("><value name="width"><shadow type="math_number" id="(9b:hC9,Y-AKmtbnr5i$"><field name="NUM">60</field></shadow></value><value name="height"><shadow type="math_number" id="u;Vf2nM]jJzPe@L~)2Z9"><field name="NUM">25</field></shadow></value></block></value><next><block type="Image_fill" id="ctH.6i^ZdR%dUSTNJ;w)"><value name="picture"><block type="variables_get" id="q+~#N|A[yAOJg,;lX#(#"><field name="VAR" id="hZnj6(@F}UqaO,6*rj9,">imagen_hitbox</field></block></value><value name="c"><shadow type="colorindexpicker" id="{MhPYpETveRsg`k5_T/o"><field name="index">3</field></shadow></value><next><block type="variables_set" id="+reu?+0#km#R@vJxLmX!"><field name="VAR" id="?9mW]As6*}F$fMy)VcD^">boton_jugar</field><value name="VALUE"><shadow type="math_number" id="ZN)1IJoyXtPd!PYD(oxi"><field name="NUM">0</field></shadow><block type="spritescreate" id="?_?OUmw]5qoxXsH3U#)W"><value name="img"><shadow type="screen_image_picker" id="E]g14Xnj|$A^z=yn.9f("><field name="img"></field></shadow><block type="variables_get" id="ej3a$1WlKAkZvd81XJX@"><field name="VAR" id="hZnj6(@F}UqaO,6*rj9,">imagen_hitbox</field></block></value><value name="kind"><shadow type="spritekind" id="2%d`d8%ugPPI{zBgB:M*"><field name="MEMBER">Player</field></shadow><block type="typescript_expression" id="j-e|G=p8Js^K|Ln^(OP$"><field name="EXPRESSION">SpriteKind.Boton</field></block></value></block></value><next><block type="spritesetpos" id="$+bQp?F9d8HP5E-`QUB9"><value name="sprite"><block type="variables_get" id="O8?P8q!cg[g__,Kc@D@)"><field name="VAR" id="?9mW]As6*}F$fMy)VcD^">boton_jugar</field></block></value><value name="x"><shadow type="positionPicker" id="u|OIxba7)jn(ea!4?BUH"><field name="index">130</field></shadow></value><value name="y"><shadow type="positionPicker" id="V78]~*^xtefwaIj^io@!"><field name="index">95</field></shadow></value><next><block type="spritesetsetflag" id="+r,!?_QWzNgr-?V`OOxl"><field name="flag">SpriteFlag.Invisible</field><value name="sprite"><block type="variables_get" id="n]dJ4N#d2X4*-DX+`Ic6"><field name="VAR" id="?9mW]As6*}F$fMy)VcD^">boton_jugar</field></block></value><value name="on"><shadow type="toggleOnOff" id="Gy,sp[oQ8Q[usg;^hC)r"><field name="on">true</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="*zte7,M#*jXzjCOfYOxh" x="4341" y="4170"><mutation name="iniciar_partida" functionid="9jxrf^cG|UJ_Jn(H/Qf9"></mutation><field name="function_name">iniciar_partida</field><statement name="STACK"><block type="music_stop_all_sounds" id="Lc3SVHx9Gg`%l9tF*N^U"><comment pinned="false" h="80" w="160">Inicialización del bucle principal del juego.
Resetea variables, carga el mapa, posiciona al jugador y arranca la música de batalla.</comment><next><block type="music_playable_play" id="~a2rq,l$;x-;@$zg;-K8"><field name="playbackMode">music.PlaybackMode.LoopingInBackground</field><value name="toPlay"><shadow type="music_melody_playable" id="PBnJ,Nf.]k3`|T`!8O3@"><field name="melody">music.baDing</field></shadow><block type="music_string_playable" id="n`DM=:iLb6c;/vP6~0o/"><value name="melody"><shadow type="melody_editor" id="rQ7v#=Cx?IGnv0l/qk[8"><field name="melody">"C5 A B G A F G E "</field></shadow></value><value name="tempo"><shadow type="math_number_minmax" id="gG3ia.G8y.hQSA]CyUfj"><mutation min="40" max="500" precision="0"></mutation><field name="SLIDER">160</field></shadow></value></block></value><next><block type="spritedestroy2" id="J;jzIQ@:j=W,*n$B(wUw"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><field name="effect">effects.spray</field><value name="sprite"><block type="variables_get" id="q~B*5(4WFGLpZ,vB=.GW"><field name="VAR" id="_N5OrimrUP_C0VqEmPK.">cursor</field></block></value><next><block type="spritedestroy2" id="3[.k[/AZl~I3i#bii}yw"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><field name="effect">effects.spray</field><value name="sprite"><block type="variables_get" id="`I`67kPF7R,$h$OI7v6-"><field name="VAR" id="?9mW]As6*}F$fMy)VcD^">boton_jugar</field></block></value><next><block type="variables_set" id="e-X=jxmg7Y^N/Py+;1Y|"><field name="VAR" id="/E%xDuwW^;j?nPZ_MpCP">municion_actual</field><value name="VALUE"><shadow type="math_number" id="HNPRG4p%MzW=AsA#oj2!"><field name="NUM">10</field></shadow></value><next><block type="variables_set" id="^#cH`.!9zc2np4c2[v-H"><field name="VAR" id="J!KsS/_`*[b/1^72kh!E">vida_jugador</field><value name="VALUE"><shadow type="math_number" id="S7Ox+4Y{KeQ4?V|@U?|c"><field name="NUM">100</field></shadow></value><next><block type="variables_set" id="doN@!(^:5Sd4nn@hK{B!"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field><value name="VALUE"><shadow type="math_number" id="GdD/;p=U_Vr_#JBhwy+L"><field name="NUM">0</field></shadow><block type="spritescreate" id=")FjO_b1bI)Ri|HmYj(a6"><value name="img"><shadow type="screen_image_picker" id="YGWtndyXoxU7YSJ7Z!b_"><field name="img">assets.image`personaje`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image2"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id="2TYr%_MxqdVXc(oqAl#z"><field name="MEMBER">Player</field></shadow></value></block></value><next><block type="game_control_sprite" id="jTBJxVPKZ$Bjie6+/oFU"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="2" _input_init="true"></mutation><comment pinned="false" h="80" w="160">Importante: activar movimiento del personaje aqui</comment><value name="sprite"><block type="variables_get" id=";@Kd~(l|G+zfF+,PCj6M"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="HP(8g{N)HAJ~$2bh5K2U"><field name="speed">100</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id="e005O#xX[zb,RkFXp$67"><field name="speed">100</field></shadow></value><next><block type="set_current_tilemap" id="MFP?.;@l9Cz=)PW)TZTc"><value name="tilemap"><shadow type="tiles_tilemap_editor" id="QFzCpz8/*,.}Z`:5_^]@"><field name="tilemap">tilemap`mapa`</field><data>{"commentRefs":[],"fieldData":{"tilemap":"level2"}}</data></shadow></value><next><block type="mapplaceonrandomtile" id=";7cfzWcH)-K6aWJ;ZN1v"><value name="sprite"><block type="variables_get" id="!CNd:hqX`2f4b%sk3jTA"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="tile"><shadow type="tileset_tile_picker" id="zsKiM{:N=$]/Kz1~C(Bs"><field name="tile">assets.tile`myTile6`</field></shadow></value><next><block type="hudsetScore" id="njpmx!4os]F1RZ;MUW_1"><value name="value"><shadow type="math_number" id="#z(k3q[}RD%iWt~(^pNY"><field name="NUM">0</field></shadow></value><next><block type="hudSetLife" id="PNUG.g8g:cTZ=IzI~@HY"><value name="value"><block type="variables_get" id="U$~kl8^rj9s9mWpIy?^M"><field name="VAR" id="J!KsS/_`*[b/1^72kh!E">vida_jugador</field></block></value><next><block type="variables_set" id="Y%-Pc]G/n9S#0p+v.it^"><field name="VAR" id="qYrZI+M7VuLXbsS=8sA6">juego_iniciado</field><value name="VALUE"><shadow type="math_number" id="02fnYDDyP?gO,%)b4ta1"><field name="NUM">0</field></shadow><block type="logic_boolean" id="G9J,tY!.*ay6Twenm^z?"><field name="BOOL">TRUE</field></block></value><next><block type="function_call" id="8^MaryF*/UM60fbNF8CH"><mutation name="crear_autobus" functionid="a,o:n+6a_;;mn=%!z]4z"></mutation><next><block type="function_call" id=";QZh_n==K3@xz]B5,;:j"><mutation name="crear_npcs_especiales" functionid="7*ke00vA95Q?Or3tXrdI"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="*+t*B//zCiaHgQ1(ob6!" x="5142" y="4170"><mutation name="crear_autobus" functionid="a,o:n+6a_;;mn=%!z]4z"></mutation><field name="function_name">crear_autobus</field><statement name="STACK"><block type="typescript_statement" id="SgX;w@q`yRmr|VK.A9Uo"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let x_inicio: number;" numlines="1" declaredvars="x_inicio"></mutation><next><block type="typescript_statement" id="i0xB#C]GPPl#d/hWE|ce"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let velocidad_x: number;" numlines="1" declaredvars="velocidad_x"></mutation><next><block type="variables_set" id="4?^sT]+}b)ldyCadDjt8"><field name="VAR" id="`-No8:Jf@eOdQerL=[Rs">en_bus</field><comment pinned="false" h="80" w="160">Crea la entidad del autobús de batalla al inicio de la partida.
Usa el flag GHOST para atravesar paredes y se mueve automáticamente.</comment><value name="VALUE"><shadow type="math_number" id="TfOvuKA+ri-%z[3C`H[d"><field name="NUM">0</field></shadow><block type="logic_boolean" id="|~ed0^=*^SNIpuzTqkm`"><field name="BOOL">TRUE</field></block></value><next><block type="variables_set" id="InOmZ(W3ds8UvBpF/vUK"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field><value name="VALUE"><shadow type="math_number" id="yH+N.3-JK.H/i^,eEPeo"><field name="NUM">0</field></shadow><block type="spritescreate" id="2z.-@hu}i!IFweiPUQx."><value name="img"><shadow type="screen_image_picker" id="@^(uFqdXn0/];jRlbpIo"><field name="img">assets.image`autobus`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image12"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id="%Uy7XO[=[mKm@D%lMOS@"><field name="MEMBER">Player</field></shadow><block type="typescript_expression" id="J?MB;L/kj]$wjQ4F2.w5"><field name="EXPRESSION">SpriteKind.Autobus</field></block></value></block></value><next><block type="spritesetsetflag" id="!aS.i:nd5fveL!y$v/~j"><field name="flag">SpriteFlag.Ghost</field><value name="sprite"><block type="variables_get" id="|/9)(!:1vl6EQacZD%jc"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value><value name="on"><shadow type="toggleOnOff" id="bUHG0,NJ,I]dno,JWfgk"><field name="on">true</field></shadow></value><next><block type="spritesetsetflag" id="uthZG3b%LNc|ye]Zct,V"><field name="flag">SpriteFlag.StayInScreen</field><value name="sprite"><block type="variables_get" id="V|l/-+]S=i-/~L9uc6ci"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value><value name="on"><shadow type="toggleOnOff" id="pP2^`*pb5IFOC;5t#Xm,"><field name="on">false</field></shadow></value><next><block type="spritesetvel" id="tsEy.OzbH~;}P?D_kc%y"><value name="sprite"><block type="variables_get" id="Q4jV@q539q`K`IxgKrix"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id=":^n0^TgS^Iw=n0mZ=,H-"><field name="speed">65</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id="AgJS5Q.d4%Px3Z[$pBB)"><field name="speed">0</field></shadow></value><next><block type="controls_if" id="H]drT]0Itxqqa:~pDj;%"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="HHRnph:YSQ@oiEzX~3Oh"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="d6R,8Uviug4u{v}4Ngbp"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="kbiG5TE[wi6OVxI1=B2_"><field name="NUM">0</field></shadow><block type="device_random" id="EnHlGsS3()S.ox~=o[3h"><value name="min"><shadow type="math_number" id="xS:E@8GMaqy3ODUeT8#k"><field name="NUM">0</field></shadow></value><value name="limit"><shadow type="math_number" id="WP(zGM;AcNiR*ja[9Ndj"><field name="NUM">1</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="m]CTaEfTV.iBr3]t8#{N"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="JQOD3Ccw[x=_WK,e?wGC"><field name="VAR" id="MAUz+o1{n3)eVkW[Je$o">x_inicio</field><value name="VALUE"><shadow type="math_number" id="X+qIsqV6@+?8sflpua(D"><field name="NUM">-40</field></shadow></value><next><block type="variables_set" id="Bac_x,IVYrb{/fhQ(.*8"><field name="VAR" id="9zR~G{m0*#)HPIl{gncd">velocidad_x</field><value name="VALUE"><shadow type="math_number" id="cO|7!W0_)Dk:a/#3k%-D"><field name="NUM">65</field></shadow></value></block></next></block></statement><statement name="ELSE"><block type="variables_set" id="~i;L)R-I2PDlc|,1:$ra"><field name="VAR" id="MAUz+o1{n3)eVkW[Je$o">x_inicio</field><value name="VALUE"><shadow type="math_number" id="8CM)5a_XlN0[}0!bKCn-"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="qDl_Mcmjfs-~{U2*el-N"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="AVUbcdA6T}xZ|E,$Ik-#"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="brHA#JxauFbQzBwBYxRj"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="1uVwiXZa]Z,RM:Wfhix0"><field name="NUM">114</field></shadow></value><value name="B"><shadow type="math_number" id="Zxld7axK4wRt)lov:9Y|"><field name="NUM">16</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="2wzXZDjJg%mq30AU8yM4"><field name="NUM">40</field></shadow></value></block></value><next><block type="variables_set" id="Q1jth3x@zTz`49qv2T*m"><field name="VAR" id="9zR~G{m0*#)HPIl{gncd">velocidad_x</field><value name="VALUE"><shadow type="math_number" id="s.kj6s5u_Z*Q?!=.upcN"><field name="NUM">-65</field></shadow></value></block></next></block></statement><next><block type="variables_set" id="F(S1~;9?pVAm2j:f{qv5"><field name="VAR" id="Xny5BR.BjNl0+9{N1f{8">y_inicio</field><value name="VALUE"><shadow type="math_number" id="1j)}]uLS}8gWq[c)9qKF"><field name="NUM">0</field></shadow><block type="device_random" id="{DQ,e;mg-+`D^1G9.~J|"><value name="min"><shadow type="math_number" id="`7dh1SQ_9O([ksUbJp{u"><field name="NUM">20</field></shadow></value><value name="limit"><block type="math_arithmetic" id="q~(K,P{sRWt/4BG|)eFp"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="+C6Qj0eTXb!3DR{)2Eh~"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="98yWsVOD$s1w{y[/}d#U"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="ph_^*mBLiqE.!f/SVRIY"><field name="NUM">114</field></shadow></value><value name="B"><shadow type="math_number" id="s@-E5MNm=pqxqsxM8upg"><field name="NUM">16</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="]RE:m-8moK==0$Tx5KwA"><field name="NUM">20</field></shadow></value></block></value></block></value><next><block type="spritesetpos" id="R{OqfMlYcOEvXQ-@)ChM"><value name="sprite"><block type="variables_get" id="F|xOF}uQGK{y#jwTx*z7"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value><value name="x"><shadow type="positionPicker" id="tjda-Ld~Blv%A=xONmLx"><field name="index">0</field></shadow><block type="variables_get" id="PWIwDrCHOX{7BK9nWP{L"><field name="VAR" id="MAUz+o1{n3)eVkW[Je$o">x_inicio</field></block></value><value name="y"><shadow type="positionPicker" id="|Dg./rpV@{:$@t{kXMhY"><field name="index">0</field></shadow><block type="variables_get" id="u}isq99!s2sm@$$%3+C{"><field name="VAR" id="Xny5BR.BjNl0+9{N1f{8">y_inicio</field></block></value><next><block type="spritesetvel" id="BnUi-%Ai~M{gpho{t_z="><value name="sprite"><block type="variables_get" id="^AB.)|}yKY$PAPZ5b;lO"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="Z[_%f/@K%r7ia@Y^?Z]S"><field name="speed">50</field></shadow><block type="variables_get" id="xkb)SI*uXFx]1!#[Gx?["><field name="VAR" id="9zR~G{m0*#)HPIl{gncd">velocidad_x</field></block></value><value name="vy"><shadow type="spriteSpeedPicker" id=")@6PW5y_Hml~S?Av;T#@"><field name="speed">0</field></shadow></value><next><block type="camerafollow" id="b9J]i%`1P-u58?/X6eO_"><value name="sprite"><block type="variables_get" id="MYdQy/|XZ6urDZ;f3f#J"><field name="VAR" id="%@3}GB}8VVEqA]P=*]wO">autobus2</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="#%+@+PUoinizcAI_]3lb" x="5957" y="4170"><mutation name="spawnear_npcs" functionid="N23b2:)[)3%9UrauhzQb"></mutation><field name="function_name">spawnear_npcs</field><statement name="STACK"><block type="typescript_statement" id="/DscHzN~l/Oyp[U!.0d!"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let enemigo: Sprite;" numlines="1" declaredvars="enemigo"></mutation><next><block type="typescript_statement" id="s!VnE0#Owj%zc[)~/=EB"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let barra: StatusBarSprite;" numlines="1" declaredvars="barra"></mutation><next><block type="device_while" id="mOGo`|i*le6__41ZwUN/"><comment pinned="false" h="80" w="160">Generación procedimental de enemigos en el mapa.
Se crean 3 grupos con estadísticas (Velocidad, IA, Vida) diferenciadas.
Grupo 1: Tanques (Mucha vida, lentos)</comment><value name="COND"><shadow type="logic_boolean" id="o]vIr*2QZ]Awo,Z(31Hi"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=";VZLSNxG^CdU7D2tlWo~"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="w9W_e1vl?HIXwks4pgX:"><field name="NUM">0</field></shadow><block type="variables_get" id="d]U!0nhHUQ6+Q2uHs52o"><field name="VAR" id="h7%p4L[_$!|A5!nIEuP=">i</field></block></value><value name="B"><shadow type="math_number" id="#{W^|t|tl#ES/eDRqQUr"><field name="NUM">5</field></shadow></value></block></value><statement name="DO"><block type="variables_set" id="9?tvy|NdNNGWQ$caao_w"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field><value name="VALUE"><shadow type="math_number" id="e67Yz{/8hh.!T$,gsS!t"><field name="NUM">0</field></shadow><block type="spritescreate" id="%55QV[??2)-?hrC;=?oi"><value name="img"><shadow type="screen_image_picker" id="@V?{}jokr5w/LW]-6;|f"><field name="img"></field></shadow><block type="variables_get" id="+8q07inbu%pwP0y?Rl*2"><field name="VAR" id="x|=6}CB=qJ|VPQldiI,e">img_enemigo1</field></block></value><value name="kind"><shadow type="spritekind" id="EV3/-P49x1a2clk2.PC,"><field name="MEMBER">Enemy</field></shadow></value></block></value><next><block type="mapplaceonrandomtile" id="`1e)2.gWHdzU`%;bpV{2"><value name="sprite"><block type="variables_get" id="eR{Z-d9GY%N9Xdh0ATtH"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field></block></value><value name="tile"><shadow type="tileset_tile_picker" id="q9{1FKesp{7]Q6he1uvX"><field name="tile">assets.tile`myTile6`</field></shadow></value><next><block type="spriteFollowOtherSprite" id="v^mo!CmjY-KcgSCktN}q"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="sprite"><block type="variables_get" id=",BKDOR3t/Sk`l`(3)peh"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field></block></value><value name="target"><block type="variables_get" id="b4aAg)79sbjOT%40vjcQ"><field name="VAR" id="l@]Mp2ZUIL2ygr+(@cxr">personaje</field></block></value><value name="speed"><shadow type="math_number" id="i|G5,kByBL)4%]%T?Cr="><field name="NUM">40</field></shadow></value><next><block type="variables_set" id=":e89Yb;|8,5o+[G]!aE+"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field><value name="VALUE"><shadow type="math_number" id="%_C6X;h,OJ$g@=Y2YSU["><field name="NUM">0</field></shadow><block type="statusbars_create" id="tF^n`KRKd2wljT~Sw/(*"><value name="width"><shadow type="math_number" id="%tCm:u/ESRTg.B{mKt%B"><field name="NUM">20</field></shadow></value><value name="height"><shadow type="math_number" id="m)vO,OlK{9bq-KJR#w1T"><field name="NUM">4</field></shadow></value><value name="kind"><shadow type="statusbars_kind" id=",?HP0bdR]kVN}3QYK@M,"><field name="MEMBER">EnemyHealth</field></shadow></value></block></value><next><block type="statusbars_attachToSprite" id="q9G2V*T{~FMJ(@uC6i!Y"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><value name="this"><block type="variables_get" id="0WIQm0tGNq(ZZsMt9-o}"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field></block></value><value name="toFollow"><block type="variables_get" id="dnud5fG*(3Fl0M3gA)Qd"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field></block></value><next><block type="StatusBarSprite_blockCombine_set" id="/pKeb[G|@H00y?@o[iQu"><field name="property">StatusBarSprite.max@set</field><value name="statusbar"><block type="variables_get" id="t[)x*+wKn=zOG__3C)QO"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field></block></value><value name="value"><shadow type="math_number" id="~a|Zgeo4d%{Z+Z2e|y8*"><field name="NUM">100</field></shadow></value><next><block type="StatusBarSprite_blockCombine_set" id="64rOd$oPn2}yK?I#j`{3"><field name="property">StatusBarSprite.value@set</field><value name="statusbar"><block type="variables_get" id="Q#}:6dF5!NJxm8-ntXxl"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field></block></value><value name="value"><shadow type="math_number" id="hC~6o]cn`2Az5~OrV#qU"><field name="NUM">100</field></shadow></value><next><block type="statusbars_setColor" id="/oA^BQ8[Bv#}+?pJ^`Xd"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><value name="this"><block type="variables_get" id="O^#VLt^*:vZe0`CMruX5"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field></block></value><value name="fillColor"><shadow type="colorindexpicker" id="Dh[C`X-AqF:Q]O))];GM"><field name="index">9</field></shadow></value><value name="bkgdColor"><shadow type="colorindexpicker" id="u[2qw_njc$rV0#Ngt+XS"><field name="index">2</field></shadow></value><next><block type="array_push" id="*ZN)6x-*[3X]j-aK6C;s"><value name="list"><block type="variables_get" id=":^I|1+P^~@IsHkhA)u=L"><field name="VAR" id="dO28`1lLFaMHT.YrcV0#">lista_npcs</field></block></value><value name="value"><block type="variables_get" id=":DVcYAt*}oLTsdz[7+cX"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field></block></value><next><block type="variables_change" id=")CF!wqN5Ia`+/I^L_F.5"><field name="VAR" id="h7%p4L[_$!|A5!nIEuP=">i</field><value name="VALUE"><shadow type="math_number" id="VLGHA2oJGwV{YS4In9|e"><field name="NUM">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type="variables_set" id="*:O/Brxz*ic1KnXTx+X6"><field name="VAR" id="h7%p4L[_$!|A5!nIEuP=">i</field><value name="VALUE"><shadow type="math_number" id="cK1ab0A$4cqSso*)~(Gm"><field name="NUM">0</field></shadow></value><next><block type="device_while" id="Qd83rz{?/tZr%_L2gaHI"><comment pinned="false" h="80" w="160">Grupo 2: Snipers (Poca vida, daño alto)</comment><value name="COND"><shadow type="logic_boolean" id="H%I1+J=o8dlB/D9:q4)h"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="yth:D-5SyX[8*Oc*1C^/"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="!}?=S0*o]Ux7N@CY}G2{"><field name="NUM">0</field></shadow><block type="variables_get" id="WgsOjCm_l6f}J(HN;@C4"><field name="VAR" id="h7%p4L[_$!|A5!nIEuP=">i</field></block></value><value name="B"><shadow type="math_number" id="OK8?yt+D=s?dERw1ASU,"><field name="NUM">5</field></shadow></value></block></value><statement name="DO"><block type="variables_set" id="O*ByRc1.NW;;ge?QIF-Q"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field><value name="VALUE"><shadow type="math_number" id=";5+#7ShGUArADH+K,G)1"><field name="NUM">0</field></shadow><block type="spritescreate" id="e]!~v1f;-gJ1dlGOfixy"><value name="img"><shadow type="screen_image_picker" id="oYcUUnez.x;_|n@`5I-k"><field name="img"></field></shadow><block type="variables_get" id="Z6,+DJKp?|iad9HM?i4D"><field name="VAR" id="m0:rnd7j?YNN!TZ9-,{+">img_enemigo2</field></block></value><value name="kind"><shadow type="spritekind" id="Jv%EjxW,DR{JCKYf{e/O"><field name="MEMBER">Enemy</field></shadow></value></block></value><next><block type="mapplaceonrandomtile" id="bR/qK8+O%Y^s+KlS4%wz"><value name="sprite"><block type="variables_get" id="oCK!f9[v=8hm~F`-?Oq~"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field></block></value><value name="tile"><shadow type="tileset_tile_picker" id="~NG@Ty}7z.`,}7%]oG-Z"><field name="tile">assets.tile`myTile6`</field></shadow></value><next><block type="variables_set" id="pmgh6/CAnnb7Hg$*7u$["><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field><value name="VALUE"><shadow type="math_number" id="N+YzeIzMIwB[.!HBxNDp"><field name="NUM">0</field></shadow><block type="statusbars_create" id="a!ZF,RaI~7UFW[K{[q@o"><value name="width"><shadow type="math_number" id="bZhw}+Q)Q96HZ3e@Hb[D"><field name="NUM">20</field></shadow></value><value name="height"><shadow type="math_number" id="h]_J^~WOuUt`,]`3V9zg"><field name="NUM">4</field></shadow></value><value name="kind"><shadow type="statusbars_kind" id="hE0c$8FLFNPF@26m5|p-"><field name="MEMBER">EnemyHealth</field></shadow></value></block></value><next><block type="statusbars_attachToSprite" id="KnM~fi!:3l`@{*Cna2@B"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><value name="this"><block type="variables_get" id=".|TZ7t(`bKe71e9zLpIt"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field></block></value><value name="toFollow"><block type="variables_get" id="u;H$ts%YErEj6W_I2X@`"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field></block></value><next><block type="StatusBarSprite_blockCombine_set" id="-E+^w@UYYBIT!^Vp_apU"><field name="property">StatusBarSprite.max@set</field><value name="statusbar"><block type="variables_get" id="a4*6~CQ?Uvb2,4fv;?6e"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field></block></value><value name="value"><shadow type="math_number" id=")rl1_Y-#OqK[SgzX*[n("><field name="NUM">40</field></shadow></value><next><block type="StatusBarSprite_blockCombine_set" id="UB7vl3t7G`/3N-iU/}%S"><field name="property">StatusBarSprite.value@set</field><value name="statusbar"><block type="variables_get" id="T^$n@;qM?!3/ui)2_H`e"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field></block></value><value name="value"><shadow type="math_number" id="|pm6n]{}?mI{9Ex$`3j`"><field name="NUM">40</field></shadow></value><next><block type="statusbars_setColor" id="MEc*b3vRMQHD$Zx[d!67"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><value name="this"><block type="variables_get" id="pvHZ;mc7L^ujL_A9yo}{"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field></block></value><value name="fillColor"><shadow type="colorindexpicker" id="~uDB^lDQPj^L]pTM])PN"><field name="index">9</field></shadow></value><value name="bkgdColor"><shadow type="colorindexpicker" id="L(f)hW-~JOw41hnfvkSx"><field name="index">2</field></shadow></value><next><block type="array_push" id="7l/o@|CB,.a*T9CIHD*g"><value name="list"><block type="variables_get" id="VqQ=-(He5PL@Gmn-1aYU"><field name="VAR" id="dO28`1lLFaMHT.YrcV0#">lista_npcs</field></block></value><value name="value"><block type="variables_get" id="YN$Sb-c`r(KhPmujceqR"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field></block></value><next><block type="variables_change" id="EHMt;DjZAP8A]ws+-6B]"><field name="VAR" id="h7%p4L[_$!|A5!nIEuP=">i</field><value name="VALUE"><shadow type="math_number" id="5JW2$zt6$R$M9Ba:#V;#"><field name="NUM">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type="variables_set" id="dLcsA9,5ISF3LO=B$Xv!"><field name="VAR" id="h7%p4L[_$!|A5!nIEuP=">i</field><value name="VALUE"><shadow type="math_number" id="l9s!8VWI/Jxkuez74y9a"><field name="NUM">0</field></shadow></value><next><block type="device_while" id="=T^3cK{yKR{rI?$z_lM+"><comment pinned="false" h="80" w="160">Grupo 3: Soldados (Balanceados, movimiento de rebote)</comment><value name="COND"><shadow type="logic_boolean" id="`2NG_($}nIHrEEg6-6:N"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="eA{D5Hj#_,gm8FdK%72t"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="eeyUJG2Nx6UUf)~ItL$h"><field name="NUM">0</field></shadow><block type="variables_get" id="5xrS[Q(8qNjYNMr6lu8s"><field name="VAR" id="h7%p4L[_$!|A5!nIEuP=">i</field></block></value><value name="B"><shadow type="math_number" id="Gs8fYk/a7X2[}/^N=ZGw"><field name="NUM">5</field></shadow></value></block></value><statement name="DO"><block type="variables_set" id=",n{d4mj[3xm!W]=O%/U3"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field><value name="VALUE"><shadow type="math_number" id="HSKM5Ljns1cPo3F43}8u"><field name="NUM">0</field></shadow><block type="spritescreate" id="J@MG{_KN.*:5RceYu:/{"><value name="img"><shadow type="screen_image_picker" id="odQd}+hYNmlNMzX!ldo~"><field name="img"></field></shadow><block type="variables_get" id="g~TPpV~9ay:?5=S!z|lP"><field name="VAR" id="*6Z$^]}6lKEWB2LlPzIX">img_enemigo3</field></block></value><value name="kind"><shadow type="spritekind" id="I/o)ro!bOrYwtRcbGk8}"><field name="MEMBER">Enemy</field></shadow></value></block></value><next><block type="mapplaceonrandomtile" id="V2xQ/{:k@^,rgxYkdLF["><value name="sprite"><block type="variables_get" id="y{5vF[@GKZ$CS^%*$[~$"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field></block></value><value name="tile"><shadow type="tileset_tile_picker" id=")I:zUCiK.Ci8ER#@e,WV"><field name="tile">assets.tile`myTile6`</field></shadow></value><next><block type="spritesetvel" id="Rs!S8~+$Veg|cOiazMw#"><value name="sprite"><block type="variables_get" id="uCdxc.!kbfoF*55k*bXm"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field></block></value><value name="vx"><shadow type="spriteSpeedPicker" id="W}W|}2C]-d,6,xi#dClE"><field name="speed">50</field></shadow></value><value name="vy"><shadow type="spriteSpeedPicker" id="60Bw6?fn_Jdh]}Kz/KG."><field name="speed">0</field></shadow></value><next><block type="spritesetsetbounceonwall" id="jlnRr@i!y6,zuVsJQH#L"><value name="sprite"><block type="variables_get" id="h/y+Ac1Me7%/#/}^Dqk{"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field></block></value><value name="on"><shadow type="toggleOnOff" id="6yR^HO`XGNF,QG0lLnO;"><field name="on">true</field></shadow></value><next><block type="variables_set" id="S3+_oE%I{9@Bjd|w*~=%"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field><value name="VALUE"><shadow type="math_number" id="NK9^6l;hH9DiS;cU7)p)"><field name="NUM">0</field></shadow><block type="statusbars_create" id="?5XiNM}C)^9?+i%M3pH8"><value name="width"><shadow type="math_number" id="NfsRHpn*~B2/KZ%S!H^5"><field name="NUM">20</field></shadow></value><value name="height"><shadow type="math_number" id="y=5GNgw=N!{Rg(dUXPL`"><field name="NUM">4</field></shadow></value><value name="kind"><shadow type="statusbars_kind" id="~Of84{RW]tXb1yK4kc[i"><field name="MEMBER">EnemyHealth</field></shadow></value></block></value><next><block type="statusbars_attachToSprite" id="!jSUCwY$PBfaqjA)2Mxq"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><value name="this"><block type="variables_get" id="u=(jq+,HsW6G4!/-$]kG"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field></block></value><value name="toFollow"><block type="variables_get" id=":zTgnU(BmZ{xvn={3*$y"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field></block></value><next><block type="StatusBarSprite_blockCombine_set" id="T!*j9P=-hRX$E29/a1;#"><field name="property">StatusBarSprite.max@set</field><value name="statusbar"><block type="variables_get" id="+eS$bq^gSyS#Lbh-d5lF"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field></block></value><value name="value"><shadow type="math_number" id="9pVh$a0oQdgxg@C*eXP)"><field name="NUM">60</field></shadow></value><next><block type="StatusBarSprite_blockCombine_set" id="[eYLEVq+:$.Zh)0f98JB"><field name="property">StatusBarSprite.value@set</field><value name="statusbar"><block type="variables_get" id=")K^_L`IiomHg@7/EqwqD"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field></block></value><value name="value"><shadow type="math_number" id="T~Ir}:[99oV@wM0!j[zk"><field name="NUM">60</field></shadow></value><next><block type="statusbars_setColor" id="3:uVDA/7!7tK`-iia#0E"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><value name="this"><block type="variables_get" id="~(eFGvbt/N$+}}wc!Q,{"><field name="VAR" id="UNW`;X+}CNOtq0PSb0a9">barra</field></block></value><value name="fillColor"><shadow type="colorindexpicker" id="9y.fB($HSKjIuB4^0a]_"><field name="index">9</field></shadow></value><value name="bkgdColor"><shadow type="colorindexpicker" id="{y+p{{w2U3,s.Nb`p$D4"><field name="index">2</field></shadow></value><next><block type="array_push" id="8P%ebru-L4U5Bwqu-Sr,"><value name="list"><block type="variables_get" id="IiiV1~j[;s)2`PyJVtip"><field name="VAR" id="dO28`1lLFaMHT.YrcV0#">lista_npcs</field></block></value><value name="value"><block type="variables_get" id="iurLs5:But*dG-S01S+*"><field name="VAR" id="2=U!60.6U1_RL}V%fvq}">enemigo</field></block></value><next><block type="variables_change" id="D.lk!l/5{|7!fX/2X]kE"><field name="VAR" id="h7%p4L[_$!|A5!nIEuP=">i</field><value name="VALUE"><shadow type="math_number" id="4Be$ba/kj/GYeT)nRr,/"><field name="NUM">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type="variables_set" id="02Q#](oR?9S[h:3f1xk*"><field name="VAR" id="2tUr)E4;,{6Bj?lTN(aS">npcs_vivos</field><value name="VALUE"><shadow type="math_number" id="X*Mi8IBy(gDjk|WX-E/7"><field name="NUM">0</field></shadow><block type="lists_length" id="Zz{U){q+1I%ZeI{k}nca"><value name="VALUE"><block type="variables_get" id="O%T%hAl*pq,~CiY[kl#K"><field name="VAR" id="dO28`1lLFaMHT.YrcV0#">lista_npcs</field></block></value></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>